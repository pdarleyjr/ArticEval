{
  "version": 3,
  "sources": ["../../node_modules/bcryptjs/dist/bcrypt.js", "../../functions/auth/utils.js", "../../functions/api/auth/login.js", "../../functions/api/auth/logout.js", "../../functions/auth/middleware.js", "../../functions/api/auth/me.js", "../../functions/api/auth/register.js", "../../functions/api/auth/session.js", "../../functions/api/forms/render.js", "../../functions/api/forms/submissions.js", "../../functions/api/forms/templates.js", "../../functions/api/forms/analytics.js", "../pages-nr7qGo/functionsWorker-0.4919190103704296.mjs/functionsRoutes-0.475471831765117.mjs", "../pages-nr7qGo/bundle-sJGPWf/middleware-loader.entry.ts", "../pages-nr7qGo/bundle-sJGPWf/middleware-insertion-facade.js", "../../../../AppData/Roaming/npm/node_modules/wrangler/templates/pages-template-worker.ts", "../../../../AppData/Roaming/npm/node_modules/wrangler/node_modules/path-to-regexp/src/index.ts", "../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-O26fM1/middleware-insertion-facade.js", "../../../../../AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../bundle-O26fM1/middleware-loader.entry.ts"],
  "sourceRoot": "C:\\Users\\Peter Darley\\Desktop\\IPLC GitHub Eval\\.wrangler\\tmp\\dev-hSypPT",
  "sourcesContent": ["/*\r\n Copyright (c) 2012 Nevins Bartolomeo <nevins.bartolomeo@gmail.com>\r\n Copyright (c) 2012 Shane Girish <shaneGirish@gmail.com>\r\n Copyright (c) 2014 Daniel Wirtz <dcode@dcode.io>\r\n\r\n Redistribution and use in source and binary forms, with or without\r\n modification, are permitted provided that the following conditions\r\n are met:\r\n 1. Redistributions of source code must retain the above copyright\r\n notice, this list of conditions and the following disclaimer.\r\n 2. Redistributions in binary form must reproduce the above copyright\r\n notice, this list of conditions and the following disclaimer in the\r\n documentation and/or other materials provided with the distribution.\r\n 3. The name of the author may not be used to endorse or promote products\r\n derived from this software without specific prior written permission.\r\n\r\n THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR\r\n IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\r\n OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\r\n IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,\r\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\r\n NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\r\n THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>\r\n * Released under the Apache License, Version 2.0\r\n * see: https://github.com/dcodeIO/bcrypt.js for details\r\n */\r\n(function(global, factory) {\r\n\r\n    /* AMD */ if (typeof define === 'function' && define[\"amd\"])\r\n        define([], factory);\r\n    /* CommonJS */ else if (typeof require === 'function' && typeof module === \"object\" && module && module[\"exports\"])\r\n        module[\"exports\"] = factory();\r\n    /* Global */ else\r\n        (global[\"dcodeIO\"] = global[\"dcodeIO\"] || {})[\"bcrypt\"] = factory();\r\n\r\n}(this, function() {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * bcrypt namespace.\r\n     * @type {Object.<string,*>}\r\n     */\r\n    var bcrypt = {};\r\n\r\n    /**\r\n     * The random implementation to use as a fallback.\r\n     * @type {?function(number):!Array.<number>}\r\n     * @inner\r\n     */\r\n    var randomFallback = null;\r\n\r\n    /**\r\n     * Generates cryptographically secure random bytes.\r\n     * @function\r\n     * @param {number} len Bytes length\r\n     * @returns {!Array.<number>} Random bytes\r\n     * @throws {Error} If no random implementation is available\r\n     * @inner\r\n     */\r\n    function random(len) {\r\n        /* node */ if (typeof module !== 'undefined' && module && module['exports'])\r\n            try {\r\n                return require(\"crypto\")['randomBytes'](len);\r\n            } catch (e) {}\r\n        /* WCA */ try {\r\n            var a; (self['crypto']||self['msCrypto'])['getRandomValues'](a = new Uint32Array(len));\r\n            return Array.prototype.slice.call(a);\r\n        } catch (e) {}\r\n        /* fallback */ if (!randomFallback)\r\n            throw Error(\"Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative\");\r\n        return randomFallback(len);\r\n    }\r\n\r\n    // Test if any secure randomness source is available\r\n    var randomAvailable = false;\r\n    try {\r\n        random(1);\r\n        randomAvailable = true;\r\n    } catch (e) {}\r\n\r\n    // Default fallback, if any\r\n    randomFallback = null;\r\n    /**\r\n     * Sets the pseudo random number generator to use as a fallback if neither node's `crypto` module nor the Web Crypto\r\n     *  API is available. Please note: It is highly important that the PRNG used is cryptographically secure and that it\r\n     *  is seeded properly!\r\n     * @param {?function(number):!Array.<number>} random Function taking the number of bytes to generate as its\r\n     *  sole argument, returning the corresponding array of cryptographically secure random byte values.\r\n     * @see http://nodejs.org/api/crypto.html\r\n     * @see http://www.w3.org/TR/WebCryptoAPI/\r\n     */\r\n    bcrypt.setRandomFallback = function(random) {\r\n        randomFallback = random;\r\n    };\r\n\r\n    /**\r\n     * Synchronously generates a salt.\r\n     * @param {number=} rounds Number of rounds to use, defaults to 10 if omitted\r\n     * @param {number=} seed_length Not supported.\r\n     * @returns {string} Resulting salt\r\n     * @throws {Error} If a random fallback is required but not set\r\n     * @expose\r\n     */\r\n    bcrypt.genSaltSync = function(rounds, seed_length) {\r\n        rounds = rounds || GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        if (typeof rounds !== 'number')\r\n            throw Error(\"Illegal arguments: \"+(typeof rounds)+\", \"+(typeof seed_length));\r\n        if (rounds < 4)\r\n            rounds = 4;\r\n        else if (rounds > 31)\r\n            rounds = 31;\r\n        var salt = [];\r\n        salt.push(\"$2a$\");\r\n        if (rounds < 10)\r\n            salt.push(\"0\");\r\n        salt.push(rounds.toString());\r\n        salt.push('$');\r\n        salt.push(base64_encode(random(BCRYPT_SALT_LEN), BCRYPT_SALT_LEN)); // May throw\r\n        return salt.join('');\r\n    };\r\n\r\n    /**\r\n     * Asynchronously generates a salt.\r\n     * @param {(number|function(Error, string=))=} rounds Number of rounds to use, defaults to 10 if omitted\r\n     * @param {(number|function(Error, string=))=} seed_length Not supported.\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting salt\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.genSalt = function(rounds, seed_length, callback) {\r\n        if (typeof seed_length === 'function')\r\n            callback = seed_length,\r\n            seed_length = undefined; // Not supported.\r\n        if (typeof rounds === 'function')\r\n            callback = rounds,\r\n            rounds = undefined;\r\n        if (typeof rounds === 'undefined')\r\n            rounds = GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        else if (typeof rounds !== 'number')\r\n            throw Error(\"illegal arguments: \"+(typeof rounds));\r\n\r\n        function _async(callback) {\r\n            nextTick(function() { // Pretty thin, but salting is fast enough\r\n                try {\r\n                    callback(null, bcrypt.genSaltSync(rounds));\r\n                } catch (err) {\r\n                    callback(err);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Synchronously generates a hash for the given string.\r\n     * @param {string} s String to hash\r\n     * @param {(number|string)=} salt Salt length to generate or salt to use, default to 10\r\n     * @returns {string} Resulting hash\r\n     * @expose\r\n     */\r\n    bcrypt.hashSync = function(s, salt) {\r\n        if (typeof salt === 'undefined')\r\n            salt = GENSALT_DEFAULT_LOG2_ROUNDS;\r\n        if (typeof salt === 'number')\r\n            salt = bcrypt.genSaltSync(salt);\r\n        if (typeof s !== 'string' || typeof salt !== 'string')\r\n            throw Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof salt));\r\n        return _hash(s, salt);\r\n    };\r\n\r\n    /**\r\n     * Asynchronously generates a hash for the given string.\r\n     * @param {string} s String to hash\r\n     * @param {number|string} salt Salt length to generate or salt to use\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash\r\n     * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\r\n     *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.hash = function(s, salt, callback, progressCallback) {\r\n\r\n        function _async(callback) {\r\n            if (typeof s === 'string' && typeof salt === 'number')\r\n                bcrypt.genSalt(salt, function(err, salt) {\r\n                    _hash(s, salt, callback, progressCallback);\r\n                });\r\n            else if (typeof s === 'string' && typeof salt === 'string')\r\n                _hash(s, salt, callback, progressCallback);\r\n            else\r\n                nextTick(callback.bind(this, Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof salt))));\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Compares two strings of the same length in constant time.\r\n     * @param {string} known Must be of the correct length\r\n     * @param {string} unknown Must be the same length as `known`\r\n     * @returns {boolean}\r\n     * @inner\r\n     */\r\n    function safeStringCompare(known, unknown) {\r\n        var right = 0,\r\n            wrong = 0;\r\n        for (var i=0, k=known.length; i<k; ++i) {\r\n            if (known.charCodeAt(i) === unknown.charCodeAt(i))\r\n                ++right;\r\n            else\r\n                ++wrong;\r\n        }\r\n        // Prevent removal of unused variables (never true, actually)\r\n        if (right < 0)\r\n            return false;\r\n        return wrong === 0;\r\n    }\r\n\r\n    /**\r\n     * Synchronously tests a string against a hash.\r\n     * @param {string} s String to compare\r\n     * @param {string} hash Hash to test against\r\n     * @returns {boolean} true if matching, otherwise false\r\n     * @throws {Error} If an argument is illegal\r\n     * @expose\r\n     */\r\n    bcrypt.compareSync = function(s, hash) {\r\n        if (typeof s !== \"string\" || typeof hash !== \"string\")\r\n            throw Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof hash));\r\n        if (hash.length !== 60)\r\n            return false;\r\n        return safeStringCompare(bcrypt.hashSync(s, hash.substr(0, hash.length-31)), hash);\r\n    };\r\n\r\n    /**\r\n     * Asynchronously compares the given data against the given hash.\r\n     * @param {string} s Data to compare\r\n     * @param {string} hash Data to be compared to\r\n     * @param {function(Error, boolean)=} callback Callback receiving the error, if any, otherwise the result\r\n     * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\r\n     *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\r\n     * @returns {!Promise} If `callback` has been omitted\r\n     * @throws {Error} If `callback` is present but not a function\r\n     * @expose\r\n     */\r\n    bcrypt.compare = function(s, hash, callback, progressCallback) {\r\n\r\n        function _async(callback) {\r\n            if (typeof s !== \"string\" || typeof hash !== \"string\") {\r\n                nextTick(callback.bind(this, Error(\"Illegal arguments: \"+(typeof s)+', '+(typeof hash))));\r\n                return;\r\n            }\r\n            if (hash.length !== 60) {\r\n                nextTick(callback.bind(this, null, false));\r\n                return;\r\n            }\r\n            bcrypt.hash(s, hash.substr(0, 29), function(err, comp) {\r\n                if (err)\r\n                    callback(err);\r\n                else\r\n                    callback(null, safeStringCompare(comp, hash));\r\n            }, progressCallback);\r\n        }\r\n\r\n        if (callback) {\r\n            if (typeof callback !== 'function')\r\n                throw Error(\"Illegal callback: \"+typeof(callback));\r\n            _async(callback);\r\n        } else\r\n            return new Promise(function(resolve, reject) {\r\n                _async(function(err, res) {\r\n                    if (err) {\r\n                        reject(err);\r\n                        return;\r\n                    }\r\n                    resolve(res);\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Gets the number of rounds used to encrypt the specified hash.\r\n     * @param {string} hash Hash to extract the used number of rounds from\r\n     * @returns {number} Number of rounds used\r\n     * @throws {Error} If `hash` is not a string\r\n     * @expose\r\n     */\r\n    bcrypt.getRounds = function(hash) {\r\n        if (typeof hash !== \"string\")\r\n            throw Error(\"Illegal arguments: \"+(typeof hash));\r\n        return parseInt(hash.split(\"$\")[2], 10);\r\n    };\r\n\r\n    /**\r\n     * Gets the salt portion from a hash. Does not validate the hash.\r\n     * @param {string} hash Hash to extract the salt from\r\n     * @returns {string} Extracted salt part\r\n     * @throws {Error} If `hash` is not a string or otherwise invalid\r\n     * @expose\r\n     */\r\n    bcrypt.getSalt = function(hash) {\r\n        if (typeof hash !== 'string')\r\n            throw Error(\"Illegal arguments: \"+(typeof hash));\r\n        if (hash.length !== 60)\r\n            throw Error(\"Illegal hash length: \"+hash.length+\" != 60\");\r\n        return hash.substring(0, 29);\r\n    };\r\n\r\n    /**\r\n     * Continues with the callback on the next tick.\r\n     * @function\r\n     * @param {function(...[*])} callback Callback to execute\r\n     * @inner\r\n     */\r\n    var nextTick = typeof process !== 'undefined' && process && typeof process.nextTick === 'function'\r\n        ? (typeof setImmediate === 'function' ? setImmediate : process.nextTick)\r\n        : setTimeout;\r\n\r\n    /**\r\n     * Converts a JavaScript string to UTF8 bytes.\r\n     * @param {string} str String\r\n     * @returns {!Array.<number>} UTF8 bytes\r\n     * @inner\r\n     */\r\n    function stringToBytes(str) {\r\n        var out = [],\r\n            i = 0;\r\n        utfx.encodeUTF16toUTF8(function() {\r\n            if (i >= str.length) return null;\r\n            return str.charCodeAt(i++);\r\n        }, function(b) {\r\n            out.push(b);\r\n        });\r\n        return out;\r\n    }\r\n\r\n    // A base64 implementation for the bcrypt algorithm. This is partly non-standard.\r\n\r\n    /**\r\n     * bcrypt's own non-standard base64 dictionary.\r\n     * @type {!Array.<string>}\r\n     * @const\r\n     * @inner\r\n     **/\r\n    var BASE64_CODE = \"./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split('');\r\n\r\n    /**\r\n     * @type {!Array.<number>}\r\n     * @const\r\n     * @inner\r\n     **/\r\n    var BASE64_INDEX = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0,\r\n        1, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, -1, -1, -1, -1, -1, -1,\r\n        -1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,\r\n        20, 21, 22, 23, 24, 25, 26, 27, -1, -1, -1, -1, -1, -1, 28, 29, 30,\r\n        31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\r\n        48, 49, 50, 51, 52, 53, -1, -1, -1, -1, -1];\r\n\r\n    /**\r\n     * @type {!function(...number):string}\r\n     * @inner\r\n     */\r\n    var stringFromCharCode = String.fromCharCode;\r\n\r\n    /**\r\n     * Encodes a byte array to base64 with up to len bytes of input.\r\n     * @param {!Array.<number>} b Byte array\r\n     * @param {number} len Maximum input length\r\n     * @returns {string}\r\n     * @inner\r\n     */\r\n    function base64_encode(b, len) {\r\n        var off = 0,\r\n            rs = [],\r\n            c1, c2;\r\n        if (len <= 0 || len > b.length)\r\n            throw Error(\"Illegal len: \"+len);\r\n        while (off < len) {\r\n            c1 = b[off++] & 0xff;\r\n            rs.push(BASE64_CODE[(c1 >> 2) & 0x3f]);\r\n            c1 = (c1 & 0x03) << 4;\r\n            if (off >= len) {\r\n                rs.push(BASE64_CODE[c1 & 0x3f]);\r\n                break;\r\n            }\r\n            c2 = b[off++] & 0xff;\r\n            c1 |= (c2 >> 4) & 0x0f;\r\n            rs.push(BASE64_CODE[c1 & 0x3f]);\r\n            c1 = (c2 & 0x0f) << 2;\r\n            if (off >= len) {\r\n                rs.push(BASE64_CODE[c1 & 0x3f]);\r\n                break;\r\n            }\r\n            c2 = b[off++] & 0xff;\r\n            c1 |= (c2 >> 6) & 0x03;\r\n            rs.push(BASE64_CODE[c1 & 0x3f]);\r\n            rs.push(BASE64_CODE[c2 & 0x3f]);\r\n        }\r\n        return rs.join('');\r\n    }\r\n\r\n    /**\r\n     * Decodes a base64 encoded string to up to len bytes of output.\r\n     * @param {string} s String to decode\r\n     * @param {number} len Maximum output length\r\n     * @returns {!Array.<number>}\r\n     * @inner\r\n     */\r\n    function base64_decode(s, len) {\r\n        var off = 0,\r\n            slen = s.length,\r\n            olen = 0,\r\n            rs = [],\r\n            c1, c2, c3, c4, o, code;\r\n        if (len <= 0)\r\n            throw Error(\"Illegal len: \"+len);\r\n        while (off < slen - 1 && olen < len) {\r\n            code = s.charCodeAt(off++);\r\n            c1 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            code = s.charCodeAt(off++);\r\n            c2 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            if (c1 == -1 || c2 == -1)\r\n                break;\r\n            o = (c1 << 2) >>> 0;\r\n            o |= (c2 & 0x30) >> 4;\r\n            rs.push(stringFromCharCode(o));\r\n            if (++olen >= len || off >= slen)\r\n                break;\r\n            code = s.charCodeAt(off++);\r\n            c3 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            if (c3 == -1)\r\n                break;\r\n            o = ((c2 & 0x0f) << 4) >>> 0;\r\n            o |= (c3 & 0x3c) >> 2;\r\n            rs.push(stringFromCharCode(o));\r\n            if (++olen >= len || off >= slen)\r\n                break;\r\n            code = s.charCodeAt(off++);\r\n            c4 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\r\n            o = ((c3 & 0x03) << 6) >>> 0;\r\n            o |= c4;\r\n            rs.push(stringFromCharCode(o));\r\n            ++olen;\r\n        }\r\n        var res = [];\r\n        for (off = 0; off<olen; off++)\r\n            res.push(rs[off].charCodeAt(0));\r\n        return res;\r\n    }\r\n\r\n    /**\r\n     * utfx-embeddable (c) 2014 Daniel Wirtz <dcode@dcode.io>\r\n     * Released under the Apache License, Version 2.0\r\n     * see: https://github.com/dcodeIO/utfx for details\r\n     */\r\n    var utfx = function() {\r\n        \"use strict\";\r\n\r\n        /**\r\n         * utfx namespace.\r\n         * @inner\r\n         * @type {!Object.<string,*>}\r\n         */\r\n        var utfx = {};\r\n\r\n        /**\r\n         * Maximum valid code point.\r\n         * @type {number}\r\n         * @const\r\n         */\r\n        utfx.MAX_CODEPOINT = 0x10FFFF;\r\n\r\n        /**\r\n         * Encodes UTF8 code points to UTF8 bytes.\r\n         * @param {(!function():number|null) | number} src Code points source, either as a function returning the next code point\r\n         *  respectively `null` if there are no more code points left or a single numeric code point.\r\n         * @param {!function(number)} dst Bytes destination as a function successively called with the next byte\r\n         */\r\n        utfx.encodeUTF8 = function(src, dst) {\r\n            var cp = null;\r\n            if (typeof src === 'number')\r\n                cp = src,\r\n                src = function() { return null; };\r\n            while (cp !== null || (cp = src()) !== null) {\r\n                if (cp < 0x80)\r\n                    dst(cp&0x7F);\r\n                else if (cp < 0x800)\r\n                    dst(((cp>>6)&0x1F)|0xC0),\r\n                    dst((cp&0x3F)|0x80);\r\n                else if (cp < 0x10000)\r\n                    dst(((cp>>12)&0x0F)|0xE0),\r\n                    dst(((cp>>6)&0x3F)|0x80),\r\n                    dst((cp&0x3F)|0x80);\r\n                else\r\n                    dst(((cp>>18)&0x07)|0xF0),\r\n                    dst(((cp>>12)&0x3F)|0x80),\r\n                    dst(((cp>>6)&0x3F)|0x80),\r\n                    dst((cp&0x3F)|0x80);\r\n                cp = null;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Decodes UTF8 bytes to UTF8 code points.\r\n         * @param {!function():number|null} src Bytes source as a function returning the next byte respectively `null` if there\r\n         *  are no more bytes left.\r\n         * @param {!function(number)} dst Code points destination as a function successively called with each decoded code point.\r\n         * @throws {RangeError} If a starting byte is invalid in UTF8\r\n         * @throws {Error} If the last sequence is truncated. Has an array property `bytes` holding the\r\n         *  remaining bytes.\r\n         */\r\n        utfx.decodeUTF8 = function(src, dst) {\r\n            var a, b, c, d, fail = function(b) {\r\n                b = b.slice(0, b.indexOf(null));\r\n                var err = Error(b.toString());\r\n                err.name = \"TruncatedError\";\r\n                err['bytes'] = b;\r\n                throw err;\r\n            };\r\n            while ((a = src()) !== null) {\r\n                if ((a&0x80) === 0)\r\n                    dst(a);\r\n                else if ((a&0xE0) === 0xC0)\r\n                    ((b = src()) === null) && fail([a, b]),\r\n                    dst(((a&0x1F)<<6) | (b&0x3F));\r\n                else if ((a&0xF0) === 0xE0)\r\n                    ((b=src()) === null || (c=src()) === null) && fail([a, b, c]),\r\n                    dst(((a&0x0F)<<12) | ((b&0x3F)<<6) | (c&0x3F));\r\n                else if ((a&0xF8) === 0xF0)\r\n                    ((b=src()) === null || (c=src()) === null || (d=src()) === null) && fail([a, b, c ,d]),\r\n                    dst(((a&0x07)<<18) | ((b&0x3F)<<12) | ((c&0x3F)<<6) | (d&0x3F));\r\n                else throw RangeError(\"Illegal starting byte: \"+a);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Converts UTF16 characters to UTF8 code points.\r\n         * @param {!function():number|null} src Characters source as a function returning the next char code respectively\r\n         *  `null` if there are no more characters left.\r\n         * @param {!function(number)} dst Code points destination as a function successively called with each converted code\r\n         *  point.\r\n         */\r\n        utfx.UTF16toUTF8 = function(src, dst) {\r\n            var c1, c2 = null;\r\n            while (true) {\r\n                if ((c1 = c2 !== null ? c2 : src()) === null)\r\n                    break;\r\n                if (c1 >= 0xD800 && c1 <= 0xDFFF) {\r\n                    if ((c2 = src()) !== null) {\r\n                        if (c2 >= 0xDC00 && c2 <= 0xDFFF) {\r\n                            dst((c1-0xD800)*0x400+c2-0xDC00+0x10000);\r\n                            c2 = null; continue;\r\n                        }\r\n                    }\r\n                }\r\n                dst(c1);\r\n            }\r\n            if (c2 !== null) dst(c2);\r\n        };\r\n\r\n        /**\r\n         * Converts UTF8 code points to UTF16 characters.\r\n         * @param {(!function():number|null) | number} src Code points source, either as a function returning the next code point\r\n         *  respectively `null` if there are no more code points left or a single numeric code point.\r\n         * @param {!function(number)} dst Characters destination as a function successively called with each converted char code.\r\n         * @throws {RangeError} If a code point is out of range\r\n         */\r\n        utfx.UTF8toUTF16 = function(src, dst) {\r\n            var cp = null;\r\n            if (typeof src === 'number')\r\n                cp = src, src = function() { return null; };\r\n            while (cp !== null || (cp = src()) !== null) {\r\n                if (cp <= 0xFFFF)\r\n                    dst(cp);\r\n                else\r\n                    cp -= 0x10000,\r\n                    dst((cp>>10)+0xD800),\r\n                    dst((cp%0x400)+0xDC00);\r\n                cp = null;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Converts and encodes UTF16 characters to UTF8 bytes.\r\n         * @param {!function():number|null} src Characters source as a function returning the next char code respectively `null`\r\n         *  if there are no more characters left.\r\n         * @param {!function(number)} dst Bytes destination as a function successively called with the next byte.\r\n         */\r\n        utfx.encodeUTF16toUTF8 = function(src, dst) {\r\n            utfx.UTF16toUTF8(src, function(cp) {\r\n                utfx.encodeUTF8(cp, dst);\r\n            });\r\n        };\r\n\r\n        /**\r\n         * Decodes and converts UTF8 bytes to UTF16 characters.\r\n         * @param {!function():number|null} src Bytes source as a function returning the next byte respectively `null` if there\r\n         *  are no more bytes left.\r\n         * @param {!function(number)} dst Characters destination as a function successively called with each converted char code.\r\n         * @throws {RangeError} If a starting byte is invalid in UTF8\r\n         * @throws {Error} If the last sequence is truncated. Has an array property `bytes` holding the remaining bytes.\r\n         */\r\n        utfx.decodeUTF8toUTF16 = function(src, dst) {\r\n            utfx.decodeUTF8(src, function(cp) {\r\n                utfx.UTF8toUTF16(cp, dst);\r\n            });\r\n        };\r\n\r\n        /**\r\n         * Calculates the byte length of an UTF8 code point.\r\n         * @param {number} cp UTF8 code point\r\n         * @returns {number} Byte length\r\n         */\r\n        utfx.calculateCodePoint = function(cp) {\r\n            return (cp < 0x80) ? 1 : (cp < 0x800) ? 2 : (cp < 0x10000) ? 3 : 4;\r\n        };\r\n\r\n        /**\r\n         * Calculates the number of UTF8 bytes required to store UTF8 code points.\r\n         * @param {(!function():number|null)} src Code points source as a function returning the next code point respectively\r\n         *  `null` if there are no more code points left.\r\n         * @returns {number} The number of UTF8 bytes required\r\n         */\r\n        utfx.calculateUTF8 = function(src) {\r\n            var cp, l=0;\r\n            while ((cp = src()) !== null)\r\n                l += utfx.calculateCodePoint(cp);\r\n            return l;\r\n        };\r\n\r\n        /**\r\n         * Calculates the number of UTF8 code points respectively UTF8 bytes required to store UTF16 char codes.\r\n         * @param {(!function():number|null)} src Characters source as a function returning the next char code respectively\r\n         *  `null` if there are no more characters left.\r\n         * @returns {!Array.<number>} The number of UTF8 code points at index 0 and the number of UTF8 bytes required at index 1.\r\n         */\r\n        utfx.calculateUTF16asUTF8 = function(src) {\r\n            var n=0, l=0;\r\n            utfx.UTF16toUTF8(src, function(cp) {\r\n                ++n; l += utfx.calculateCodePoint(cp);\r\n            });\r\n            return [n,l];\r\n        };\r\n\r\n        return utfx;\r\n    }();\r\n\r\n    Date.now = Date.now || function() { return +new Date; };\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var BCRYPT_SALT_LEN = 16;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var GENSALT_DEFAULT_LOG2_ROUNDS = 10;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var BLOWFISH_NUM_ROUNDS = 16;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var MAX_EXECUTION_TIME = 100;\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var P_ORIG = [\r\n        0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344, 0xa4093822,\r\n        0x299f31d0, 0x082efa98, 0xec4e6c89, 0x452821e6, 0x38d01377,\r\n        0xbe5466cf, 0x34e90c6c, 0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5,\r\n        0xb5470917, 0x9216d5d9, 0x8979fb1b\r\n    ];\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var S_ORIG = [\r\n        0xd1310ba6, 0x98dfb5ac, 0x2ffd72db, 0xd01adfb7, 0xb8e1afed,\r\n        0x6a267e96, 0xba7c9045, 0xf12c7f99, 0x24a19947, 0xb3916cf7,\r\n        0x0801f2e2, 0x858efc16, 0x636920d8, 0x71574e69, 0xa458fea3,\r\n        0xf4933d7e, 0x0d95748f, 0x728eb658, 0x718bcd58, 0x82154aee,\r\n        0x7b54a41d, 0xc25a59b5, 0x9c30d539, 0x2af26013, 0xc5d1b023,\r\n        0x286085f0, 0xca417918, 0xb8db38ef, 0x8e79dcb0, 0x603a180e,\r\n        0x6c9e0e8b, 0xb01e8a3e, 0xd71577c1, 0xbd314b27, 0x78af2fda,\r\n        0x55605c60, 0xe65525f3, 0xaa55ab94, 0x57489862, 0x63e81440,\r\n        0x55ca396a, 0x2aab10b6, 0xb4cc5c34, 0x1141e8ce, 0xa15486af,\r\n        0x7c72e993, 0xb3ee1411, 0x636fbc2a, 0x2ba9c55d, 0x741831f6,\r\n        0xce5c3e16, 0x9b87931e, 0xafd6ba33, 0x6c24cf5c, 0x7a325381,\r\n        0x28958677, 0x3b8f4898, 0x6b4bb9af, 0xc4bfe81b, 0x66282193,\r\n        0x61d809cc, 0xfb21a991, 0x487cac60, 0x5dec8032, 0xef845d5d,\r\n        0xe98575b1, 0xdc262302, 0xeb651b88, 0x23893e81, 0xd396acc5,\r\n        0x0f6d6ff3, 0x83f44239, 0x2e0b4482, 0xa4842004, 0x69c8f04a,\r\n        0x9e1f9b5e, 0x21c66842, 0xf6e96c9a, 0x670c9c61, 0xabd388f0,\r\n        0x6a51a0d2, 0xd8542f68, 0x960fa728, 0xab5133a3, 0x6eef0b6c,\r\n        0x137a3be4, 0xba3bf050, 0x7efb2a98, 0xa1f1651d, 0x39af0176,\r\n        0x66ca593e, 0x82430e88, 0x8cee8619, 0x456f9fb4, 0x7d84a5c3,\r\n        0x3b8b5ebe, 0xe06f75d8, 0x85c12073, 0x401a449f, 0x56c16aa6,\r\n        0x4ed3aa62, 0x363f7706, 0x1bfedf72, 0x429b023d, 0x37d0d724,\r\n        0xd00a1248, 0xdb0fead3, 0x49f1c09b, 0x075372c9, 0x80991b7b,\r\n        0x25d479d8, 0xf6e8def7, 0xe3fe501a, 0xb6794c3b, 0x976ce0bd,\r\n        0x04c006ba, 0xc1a94fb6, 0x409f60c4, 0x5e5c9ec2, 0x196a2463,\r\n        0x68fb6faf, 0x3e6c53b5, 0x1339b2eb, 0x3b52ec6f, 0x6dfc511f,\r\n        0x9b30952c, 0xcc814544, 0xaf5ebd09, 0xbee3d004, 0xde334afd,\r\n        0x660f2807, 0x192e4bb3, 0xc0cba857, 0x45c8740f, 0xd20b5f39,\r\n        0xb9d3fbdb, 0x5579c0bd, 0x1a60320a, 0xd6a100c6, 0x402c7279,\r\n        0x679f25fe, 0xfb1fa3cc, 0x8ea5e9f8, 0xdb3222f8, 0x3c7516df,\r\n        0xfd616b15, 0x2f501ec8, 0xad0552ab, 0x323db5fa, 0xfd238760,\r\n        0x53317b48, 0x3e00df82, 0x9e5c57bb, 0xca6f8ca0, 0x1a87562e,\r\n        0xdf1769db, 0xd542a8f6, 0x287effc3, 0xac6732c6, 0x8c4f5573,\r\n        0x695b27b0, 0xbbca58c8, 0xe1ffa35d, 0xb8f011a0, 0x10fa3d98,\r\n        0xfd2183b8, 0x4afcb56c, 0x2dd1d35b, 0x9a53e479, 0xb6f84565,\r\n        0xd28e49bc, 0x4bfb9790, 0xe1ddf2da, 0xa4cb7e33, 0x62fb1341,\r\n        0xcee4c6e8, 0xef20cada, 0x36774c01, 0xd07e9efe, 0x2bf11fb4,\r\n        0x95dbda4d, 0xae909198, 0xeaad8e71, 0x6b93d5a0, 0xd08ed1d0,\r\n        0xafc725e0, 0x8e3c5b2f, 0x8e7594b7, 0x8ff6e2fb, 0xf2122b64,\r\n        0x8888b812, 0x900df01c, 0x4fad5ea0, 0x688fc31c, 0xd1cff191,\r\n        0xb3a8c1ad, 0x2f2f2218, 0xbe0e1777, 0xea752dfe, 0x8b021fa1,\r\n        0xe5a0cc0f, 0xb56f74e8, 0x18acf3d6, 0xce89e299, 0xb4a84fe0,\r\n        0xfd13e0b7, 0x7cc43b81, 0xd2ada8d9, 0x165fa266, 0x80957705,\r\n        0x93cc7314, 0x211a1477, 0xe6ad2065, 0x77b5fa86, 0xc75442f5,\r\n        0xfb9d35cf, 0xebcdaf0c, 0x7b3e89a0, 0xd6411bd3, 0xae1e7e49,\r\n        0x00250e2d, 0x2071b35e, 0x226800bb, 0x57b8e0af, 0x2464369b,\r\n        0xf009b91e, 0x5563911d, 0x59dfa6aa, 0x78c14389, 0xd95a537f,\r\n        0x207d5ba2, 0x02e5b9c5, 0x83260376, 0x6295cfa9, 0x11c81968,\r\n        0x4e734a41, 0xb3472dca, 0x7b14a94a, 0x1b510052, 0x9a532915,\r\n        0xd60f573f, 0xbc9bc6e4, 0x2b60a476, 0x81e67400, 0x08ba6fb5,\r\n        0x571be91f, 0xf296ec6b, 0x2a0dd915, 0xb6636521, 0xe7b9f9b6,\r\n        0xff34052e, 0xc5855664, 0x53b02d5d, 0xa99f8fa1, 0x08ba4799,\r\n        0x6e85076a, 0x4b7a70e9, 0xb5b32944, 0xdb75092e, 0xc4192623,\r\n        0xad6ea6b0, 0x49a7df7d, 0x9cee60b8, 0x8fedb266, 0xecaa8c71,\r\n        0x699a17ff, 0x5664526c, 0xc2b19ee1, 0x193602a5, 0x75094c29,\r\n        0xa0591340, 0xe4183a3e, 0x3f54989a, 0x5b429d65, 0x6b8fe4d6,\r\n        0x99f73fd6, 0xa1d29c07, 0xefe830f5, 0x4d2d38e6, 0xf0255dc1,\r\n        0x4cdd2086, 0x8470eb26, 0x6382e9c6, 0x021ecc5e, 0x09686b3f,\r\n        0x3ebaefc9, 0x3c971814, 0x6b6a70a1, 0x687f3584, 0x52a0e286,\r\n        0xb79c5305, 0xaa500737, 0x3e07841c, 0x7fdeae5c, 0x8e7d44ec,\r\n        0x5716f2b8, 0xb03ada37, 0xf0500c0d, 0xf01c1f04, 0x0200b3ff,\r\n        0xae0cf51a, 0x3cb574b2, 0x25837a58, 0xdc0921bd, 0xd19113f9,\r\n        0x7ca92ff6, 0x94324773, 0x22f54701, 0x3ae5e581, 0x37c2dadc,\r\n        0xc8b57634, 0x9af3dda7, 0xa9446146, 0x0fd0030e, 0xecc8c73e,\r\n        0xa4751e41, 0xe238cd99, 0x3bea0e2f, 0x3280bba1, 0x183eb331,\r\n        0x4e548b38, 0x4f6db908, 0x6f420d03, 0xf60a04bf, 0x2cb81290,\r\n        0x24977c79, 0x5679b072, 0xbcaf89af, 0xde9a771f, 0xd9930810,\r\n        0xb38bae12, 0xdccf3f2e, 0x5512721f, 0x2e6b7124, 0x501adde6,\r\n        0x9f84cd87, 0x7a584718, 0x7408da17, 0xbc9f9abc, 0xe94b7d8c,\r\n        0xec7aec3a, 0xdb851dfa, 0x63094366, 0xc464c3d2, 0xef1c1847,\r\n        0x3215d908, 0xdd433b37, 0x24c2ba16, 0x12a14d43, 0x2a65c451,\r\n        0x50940002, 0x133ae4dd, 0x71dff89e, 0x10314e55, 0x81ac77d6,\r\n        0x5f11199b, 0x043556f1, 0xd7a3c76b, 0x3c11183b, 0x5924a509,\r\n        0xf28fe6ed, 0x97f1fbfa, 0x9ebabf2c, 0x1e153c6e, 0x86e34570,\r\n        0xeae96fb1, 0x860e5e0a, 0x5a3e2ab3, 0x771fe71c, 0x4e3d06fa,\r\n        0x2965dcb9, 0x99e71d0f, 0x803e89d6, 0x5266c825, 0x2e4cc978,\r\n        0x9c10b36a, 0xc6150eba, 0x94e2ea78, 0xa5fc3c53, 0x1e0a2df4,\r\n        0xf2f74ea7, 0x361d2b3d, 0x1939260f, 0x19c27960, 0x5223a708,\r\n        0xf71312b6, 0xebadfe6e, 0xeac31f66, 0xe3bc4595, 0xa67bc883,\r\n        0xb17f37d1, 0x018cff28, 0xc332ddef, 0xbe6c5aa5, 0x65582185,\r\n        0x68ab9802, 0xeecea50f, 0xdb2f953b, 0x2aef7dad, 0x5b6e2f84,\r\n        0x1521b628, 0x29076170, 0xecdd4775, 0x619f1510, 0x13cca830,\r\n        0xeb61bd96, 0x0334fe1e, 0xaa0363cf, 0xb5735c90, 0x4c70a239,\r\n        0xd59e9e0b, 0xcbaade14, 0xeecc86bc, 0x60622ca7, 0x9cab5cab,\r\n        0xb2f3846e, 0x648b1eaf, 0x19bdf0ca, 0xa02369b9, 0x655abb50,\r\n        0x40685a32, 0x3c2ab4b3, 0x319ee9d5, 0xc021b8f7, 0x9b540b19,\r\n        0x875fa099, 0x95f7997e, 0x623d7da8, 0xf837889a, 0x97e32d77,\r\n        0x11ed935f, 0x16681281, 0x0e358829, 0xc7e61fd6, 0x96dedfa1,\r\n        0x7858ba99, 0x57f584a5, 0x1b227263, 0x9b83c3ff, 0x1ac24696,\r\n        0xcdb30aeb, 0x532e3054, 0x8fd948e4, 0x6dbc3128, 0x58ebf2ef,\r\n        0x34c6ffea, 0xfe28ed61, 0xee7c3c73, 0x5d4a14d9, 0xe864b7e3,\r\n        0x42105d14, 0x203e13e0, 0x45eee2b6, 0xa3aaabea, 0xdb6c4f15,\r\n        0xfacb4fd0, 0xc742f442, 0xef6abbb5, 0x654f3b1d, 0x41cd2105,\r\n        0xd81e799e, 0x86854dc7, 0xe44b476a, 0x3d816250, 0xcf62a1f2,\r\n        0x5b8d2646, 0xfc8883a0, 0xc1c7b6a3, 0x7f1524c3, 0x69cb7492,\r\n        0x47848a0b, 0x5692b285, 0x095bbf00, 0xad19489d, 0x1462b174,\r\n        0x23820e00, 0x58428d2a, 0x0c55f5ea, 0x1dadf43e, 0x233f7061,\r\n        0x3372f092, 0x8d937e41, 0xd65fecf1, 0x6c223bdb, 0x7cde3759,\r\n        0xcbee7460, 0x4085f2a7, 0xce77326e, 0xa6078084, 0x19f8509e,\r\n        0xe8efd855, 0x61d99735, 0xa969a7aa, 0xc50c06c2, 0x5a04abfc,\r\n        0x800bcadc, 0x9e447a2e, 0xc3453484, 0xfdd56705, 0x0e1e9ec9,\r\n        0xdb73dbd3, 0x105588cd, 0x675fda79, 0xe3674340, 0xc5c43465,\r\n        0x713e38d8, 0x3d28f89e, 0xf16dff20, 0x153e21e7, 0x8fb03d4a,\r\n        0xe6e39f2b, 0xdb83adf7, 0xe93d5a68, 0x948140f7, 0xf64c261c,\r\n        0x94692934, 0x411520f7, 0x7602d4f7, 0xbcf46b2e, 0xd4a20068,\r\n        0xd4082471, 0x3320f46a, 0x43b7d4b7, 0x500061af, 0x1e39f62e,\r\n        0x97244546, 0x14214f74, 0xbf8b8840, 0x4d95fc1d, 0x96b591af,\r\n        0x70f4ddd3, 0x66a02f45, 0xbfbc09ec, 0x03bd9785, 0x7fac6dd0,\r\n        0x31cb8504, 0x96eb27b3, 0x55fd3941, 0xda2547e6, 0xabca0a9a,\r\n        0x28507825, 0x530429f4, 0x0a2c86da, 0xe9b66dfb, 0x68dc1462,\r\n        0xd7486900, 0x680ec0a4, 0x27a18dee, 0x4f3ffea2, 0xe887ad8c,\r\n        0xb58ce006, 0x7af4d6b6, 0xaace1e7c, 0xd3375fec, 0xce78a399,\r\n        0x406b2a42, 0x20fe9e35, 0xd9f385b9, 0xee39d7ab, 0x3b124e8b,\r\n        0x1dc9faf7, 0x4b6d1856, 0x26a36631, 0xeae397b2, 0x3a6efa74,\r\n        0xdd5b4332, 0x6841e7f7, 0xca7820fb, 0xfb0af54e, 0xd8feb397,\r\n        0x454056ac, 0xba489527, 0x55533a3a, 0x20838d87, 0xfe6ba9b7,\r\n        0xd096954b, 0x55a867bc, 0xa1159a58, 0xcca92963, 0x99e1db33,\r\n        0xa62a4a56, 0x3f3125f9, 0x5ef47e1c, 0x9029317c, 0xfdf8e802,\r\n        0x04272f70, 0x80bb155c, 0x05282ce3, 0x95c11548, 0xe4c66d22,\r\n        0x48c1133f, 0xc70f86dc, 0x07f9c9ee, 0x41041f0f, 0x404779a4,\r\n        0x5d886e17, 0x325f51eb, 0xd59bc0d1, 0xf2bcc18f, 0x41113564,\r\n        0x257b7834, 0x602a9c60, 0xdff8e8a3, 0x1f636c1b, 0x0e12b4c2,\r\n        0x02e1329e, 0xaf664fd1, 0xcad18115, 0x6b2395e0, 0x333e92e1,\r\n        0x3b240b62, 0xeebeb922, 0x85b2a20e, 0xe6ba0d99, 0xde720c8c,\r\n        0x2da2f728, 0xd0127845, 0x95b794fd, 0x647d0862, 0xe7ccf5f0,\r\n        0x5449a36f, 0x877d48fa, 0xc39dfd27, 0xf33e8d1e, 0x0a476341,\r\n        0x992eff74, 0x3a6f6eab, 0xf4f8fd37, 0xa812dc60, 0xa1ebddf8,\r\n        0x991be14c, 0xdb6e6b0d, 0xc67b5510, 0x6d672c37, 0x2765d43b,\r\n        0xdcd0e804, 0xf1290dc7, 0xcc00ffa3, 0xb5390f92, 0x690fed0b,\r\n        0x667b9ffb, 0xcedb7d9c, 0xa091cf0b, 0xd9155ea3, 0xbb132f88,\r\n        0x515bad24, 0x7b9479bf, 0x763bd6eb, 0x37392eb3, 0xcc115979,\r\n        0x8026e297, 0xf42e312d, 0x6842ada7, 0xc66a2b3b, 0x12754ccc,\r\n        0x782ef11c, 0x6a124237, 0xb79251e7, 0x06a1bbe6, 0x4bfb6350,\r\n        0x1a6b1018, 0x11caedfa, 0x3d25bdd8, 0xe2e1c3c9, 0x44421659,\r\n        0x0a121386, 0xd90cec6e, 0xd5abea2a, 0x64af674e, 0xda86a85f,\r\n        0xbebfe988, 0x64e4c3fe, 0x9dbc8057, 0xf0f7c086, 0x60787bf8,\r\n        0x6003604d, 0xd1fd8346, 0xf6381fb0, 0x7745ae04, 0xd736fccc,\r\n        0x83426b33, 0xf01eab71, 0xb0804187, 0x3c005e5f, 0x77a057be,\r\n        0xbde8ae24, 0x55464299, 0xbf582e61, 0x4e58f48f, 0xf2ddfda2,\r\n        0xf474ef38, 0x8789bdc2, 0x5366f9c3, 0xc8b38e74, 0xb475f255,\r\n        0x46fcd9b9, 0x7aeb2661, 0x8b1ddf84, 0x846a0e79, 0x915f95e2,\r\n        0x466e598e, 0x20b45770, 0x8cd55591, 0xc902de4c, 0xb90bace1,\r\n        0xbb8205d0, 0x11a86248, 0x7574a99e, 0xb77f19b6, 0xe0a9dc09,\r\n        0x662d09a1, 0xc4324633, 0xe85a1f02, 0x09f0be8c, 0x4a99a025,\r\n        0x1d6efe10, 0x1ab93d1d, 0x0ba5a4df, 0xa186f20f, 0x2868f169,\r\n        0xdcb7da83, 0x573906fe, 0xa1e2ce9b, 0x4fcd7f52, 0x50115e01,\r\n        0xa70683fa, 0xa002b5c4, 0x0de6d027, 0x9af88c27, 0x773f8641,\r\n        0xc3604c06, 0x61a806b5, 0xf0177a28, 0xc0f586e0, 0x006058aa,\r\n        0x30dc7d62, 0x11e69ed7, 0x2338ea63, 0x53c2dd94, 0xc2c21634,\r\n        0xbbcbee56, 0x90bcb6de, 0xebfc7da1, 0xce591d76, 0x6f05e409,\r\n        0x4b7c0188, 0x39720a3d, 0x7c927c24, 0x86e3725f, 0x724d9db9,\r\n        0x1ac15bb4, 0xd39eb8fc, 0xed545578, 0x08fca5b5, 0xd83d7cd3,\r\n        0x4dad0fc4, 0x1e50ef5e, 0xb161e6f8, 0xa28514d9, 0x6c51133c,\r\n        0x6fd5c7e7, 0x56e14ec4, 0x362abfce, 0xddc6c837, 0xd79a3234,\r\n        0x92638212, 0x670efa8e, 0x406000e0, 0x3a39ce37, 0xd3faf5cf,\r\n        0xabc27737, 0x5ac52d1b, 0x5cb0679e, 0x4fa33742, 0xd3822740,\r\n        0x99bc9bbe, 0xd5118e9d, 0xbf0f7315, 0xd62d1c7e, 0xc700c47b,\r\n        0xb78c1b6b, 0x21a19045, 0xb26eb1be, 0x6a366eb4, 0x5748ab2f,\r\n        0xbc946e79, 0xc6a376d2, 0x6549c2c8, 0x530ff8ee, 0x468dde7d,\r\n        0xd5730a1d, 0x4cd04dc6, 0x2939bbdb, 0xa9ba4650, 0xac9526e8,\r\n        0xbe5ee304, 0xa1fad5f0, 0x6a2d519a, 0x63ef8ce2, 0x9a86ee22,\r\n        0xc089c2b8, 0x43242ef6, 0xa51e03aa, 0x9cf2d0a4, 0x83c061ba,\r\n        0x9be96a4d, 0x8fe51550, 0xba645bd6, 0x2826a2f9, 0xa73a3ae1,\r\n        0x4ba99586, 0xef5562e9, 0xc72fefd3, 0xf752f7da, 0x3f046f69,\r\n        0x77fa0a59, 0x80e4a915, 0x87b08601, 0x9b09e6ad, 0x3b3ee593,\r\n        0xe990fd5a, 0x9e34d797, 0x2cf0b7d9, 0x022b8b51, 0x96d5ac3a,\r\n        0x017da67d, 0xd1cf3ed6, 0x7c7d2d28, 0x1f9f25cf, 0xadf2b89b,\r\n        0x5ad6b472, 0x5a88f54c, 0xe029ac71, 0xe019a5e6, 0x47b0acfd,\r\n        0xed93fa9b, 0xe8d3c48d, 0x283b57cc, 0xf8d56629, 0x79132e28,\r\n        0x785f0191, 0xed756055, 0xf7960e44, 0xe3d35e8c, 0x15056dd4,\r\n        0x88f46dba, 0x03a16125, 0x0564f0bd, 0xc3eb9e15, 0x3c9057a2,\r\n        0x97271aec, 0xa93a072a, 0x1b3f6d9b, 0x1e6321f5, 0xf59c66fb,\r\n        0x26dcf319, 0x7533d928, 0xb155fdf5, 0x03563482, 0x8aba3cbb,\r\n        0x28517711, 0xc20ad9f8, 0xabcc5167, 0xccad925f, 0x4de81751,\r\n        0x3830dc8e, 0x379d5862, 0x9320f991, 0xea7a90c2, 0xfb3e7bce,\r\n        0x5121ce64, 0x774fbe32, 0xa8b6e37e, 0xc3293d46, 0x48de5369,\r\n        0x6413e680, 0xa2ae0810, 0xdd6db224, 0x69852dfd, 0x09072166,\r\n        0xb39a460a, 0x6445c0dd, 0x586cdecf, 0x1c20c8ae, 0x5bbef7dd,\r\n        0x1b588d40, 0xccd2017f, 0x6bb4e3bb, 0xdda26a7e, 0x3a59ff45,\r\n        0x3e350a44, 0xbcb4cdd5, 0x72eacea8, 0xfa6484bb, 0x8d6612ae,\r\n        0xbf3c6f47, 0xd29be463, 0x542f5d9e, 0xaec2771b, 0xf64e6370,\r\n        0x740e0d8d, 0xe75b1357, 0xf8721671, 0xaf537d5d, 0x4040cb08,\r\n        0x4eb4e2cc, 0x34d2466a, 0x0115af84, 0xe1b00428, 0x95983a1d,\r\n        0x06b89fb4, 0xce6ea048, 0x6f3f3b82, 0x3520ab82, 0x011a1d4b,\r\n        0x277227f8, 0x611560b1, 0xe7933fdc, 0xbb3a792b, 0x344525bd,\r\n        0xa08839e1, 0x51ce794b, 0x2f32c9b7, 0xa01fbac9, 0xe01cc87e,\r\n        0xbcc7d1f6, 0xcf0111c3, 0xa1e8aac7, 0x1a908749, 0xd44fbd9a,\r\n        0xd0dadecb, 0xd50ada38, 0x0339c32a, 0xc6913667, 0x8df9317c,\r\n        0xe0b12b4f, 0xf79e59b7, 0x43f5bb3a, 0xf2d519ff, 0x27d9459c,\r\n        0xbf97222c, 0x15e6fc2a, 0x0f91fc71, 0x9b941525, 0xfae59361,\r\n        0xceb69ceb, 0xc2a86459, 0x12baa8d1, 0xb6c1075e, 0xe3056a0c,\r\n        0x10d25065, 0xcb03a442, 0xe0ec6e0e, 0x1698db3b, 0x4c98a0be,\r\n        0x3278e964, 0x9f1f9532, 0xe0d392df, 0xd3a0342b, 0x8971f21e,\r\n        0x1b0a7441, 0x4ba3348c, 0xc5be7120, 0xc37632d8, 0xdf359f8d,\r\n        0x9b992f2e, 0xe60b6f47, 0x0fe3f11d, 0xe54cda54, 0x1edad891,\r\n        0xce6279cf, 0xcd3e7e6f, 0x1618b166, 0xfd2c1d05, 0x848fd2c5,\r\n        0xf6fb2299, 0xf523f357, 0xa6327623, 0x93a83531, 0x56cccd02,\r\n        0xacf08162, 0x5a75ebb5, 0x6e163697, 0x88d273cc, 0xde966292,\r\n        0x81b949d0, 0x4c50901b, 0x71c65614, 0xe6c6c7bd, 0x327a140a,\r\n        0x45e1d006, 0xc3f27b9a, 0xc9aa53fd, 0x62a80f00, 0xbb25bfe2,\r\n        0x35bdd2f6, 0x71126905, 0xb2040222, 0xb6cbcf7c, 0xcd769c2b,\r\n        0x53113ec0, 0x1640e3d3, 0x38abbd60, 0x2547adf0, 0xba38209c,\r\n        0xf746ce76, 0x77afa1c5, 0x20756060, 0x85cbfe4e, 0x8ae88dd8,\r\n        0x7aaaf9b0, 0x4cf9aa7e, 0x1948c25c, 0x02fb8a8c, 0x01c36ae4,\r\n        0xd6ebe1f9, 0x90d4f869, 0xa65cdea0, 0x3f09252d, 0xc208e69f,\r\n        0xb74e6132, 0xce77e25b, 0x578fdfe3, 0x3ac372e6\r\n    ];\r\n\r\n    /**\r\n     * @type {Array.<number>}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var C_ORIG = [\r\n        0x4f727068, 0x65616e42, 0x65686f6c, 0x64657253, 0x63727944,\r\n        0x6f756274\r\n    ];\r\n\r\n    /**\r\n     * @param {Array.<number>} lr\r\n     * @param {number} off\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @returns {Array.<number>}\r\n     * @inner\r\n     */\r\n    function _encipher(lr, off, P, S) { // This is our bottleneck: 1714/1905 ticks / 90% - see profile.txt\r\n        var n,\r\n            l = lr[off],\r\n            r = lr[off + 1];\r\n\r\n        l ^= P[0];\r\n\r\n        /*\r\n        for (var i=0, k=BLOWFISH_NUM_ROUNDS-2; i<=k;)\r\n            // Feistel substitution on left word\r\n            n  = S[l >>> 24],\r\n            n += S[0x100 | ((l >> 16) & 0xff)],\r\n            n ^= S[0x200 | ((l >> 8) & 0xff)],\r\n            n += S[0x300 | (l & 0xff)],\r\n            r ^= n ^ P[++i],\r\n            // Feistel substitution on right word\r\n            n  = S[r >>> 24],\r\n            n += S[0x100 | ((r >> 16) & 0xff)],\r\n            n ^= S[0x200 | ((r >> 8) & 0xff)],\r\n            n += S[0x300 | (r & 0xff)],\r\n            l ^= n ^ P[++i];\r\n        */\r\n\r\n        //The following is an unrolled version of the above loop.\r\n        //Iteration 0\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[1];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[2];\r\n        //Iteration 1\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[3];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[4];\r\n        //Iteration 2\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[5];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[6];\r\n        //Iteration 3\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[7];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[8];\r\n        //Iteration 4\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[9];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[10];\r\n        //Iteration 5\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[11];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[12];\r\n        //Iteration 6\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[13];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[14];\r\n        //Iteration 7\r\n        n  = S[l >>> 24];\r\n        n += S[0x100 | ((l >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((l >> 8) & 0xff)];\r\n        n += S[0x300 | (l & 0xff)];\r\n        r ^= n ^ P[15];\r\n        n  = S[r >>> 24];\r\n        n += S[0x100 | ((r >> 16) & 0xff)];\r\n        n ^= S[0x200 | ((r >> 8) & 0xff)];\r\n        n += S[0x300 | (r & 0xff)];\r\n        l ^= n ^ P[16];\r\n\r\n        lr[off] = r ^ P[BLOWFISH_NUM_ROUNDS + 1];\r\n        lr[off + 1] = l;\r\n        return lr;\r\n    }\r\n\r\n    /**\r\n     * @param {Array.<number>} data\r\n     * @param {number} offp\r\n     * @returns {{key: number, offp: number}}\r\n     * @inner\r\n     */\r\n    function _streamtoword(data, offp) {\r\n        for (var i = 0, word = 0; i < 4; ++i)\r\n            word = (word << 8) | (data[offp] & 0xff),\r\n            offp = (offp + 1) % data.length;\r\n        return { key: word, offp: offp };\r\n    }\r\n\r\n    /**\r\n     * @param {Array.<number>} key\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @inner\r\n     */\r\n    function _key(key, P, S) {\r\n        var offset = 0,\r\n            lr = [0, 0],\r\n            plen = P.length,\r\n            slen = S.length,\r\n            sw;\r\n        for (var i = 0; i < plen; i++)\r\n            sw = _streamtoword(key, offset),\r\n            offset = sw.offp,\r\n            P[i] = P[i] ^ sw.key;\r\n        for (i = 0; i < plen; i += 2)\r\n            lr = _encipher(lr, 0, P, S),\r\n            P[i] = lr[0],\r\n            P[i + 1] = lr[1];\r\n        for (i = 0; i < slen; i += 2)\r\n            lr = _encipher(lr, 0, P, S),\r\n            S[i] = lr[0],\r\n            S[i + 1] = lr[1];\r\n    }\r\n\r\n    /**\r\n     * Expensive key schedule Blowfish.\r\n     * @param {Array.<number>} data\r\n     * @param {Array.<number>} key\r\n     * @param {Array.<number>} P\r\n     * @param {Array.<number>} S\r\n     * @inner\r\n     */\r\n    function _ekskey(data, key, P, S) {\r\n        var offp = 0,\r\n            lr = [0, 0],\r\n            plen = P.length,\r\n            slen = S.length,\r\n            sw;\r\n        for (var i = 0; i < plen; i++)\r\n            sw = _streamtoword(key, offp),\r\n            offp = sw.offp,\r\n            P[i] = P[i] ^ sw.key;\r\n        offp = 0;\r\n        for (i = 0; i < plen; i += 2)\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[0] ^= sw.key,\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[1] ^= sw.key,\r\n            lr = _encipher(lr, 0, P, S),\r\n            P[i] = lr[0],\r\n            P[i + 1] = lr[1];\r\n        for (i = 0; i < slen; i += 2)\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[0] ^= sw.key,\r\n            sw = _streamtoword(data, offp),\r\n            offp = sw.offp,\r\n            lr[1] ^= sw.key,\r\n            lr = _encipher(lr, 0, P, S),\r\n            S[i] = lr[0],\r\n            S[i + 1] = lr[1];\r\n    }\r\n\r\n    /**\r\n     * Internaly crypts a string.\r\n     * @param {Array.<number>} b Bytes to crypt\r\n     * @param {Array.<number>} salt Salt bytes to use\r\n     * @param {number} rounds Number of rounds\r\n     * @param {function(Error, Array.<number>=)=} callback Callback receiving the error, if any, and the resulting bytes. If\r\n     *  omitted, the operation will be performed synchronously.\r\n     *  @param {function(number)=} progressCallback Callback called with the current progress\r\n     * @returns {!Array.<number>|undefined} Resulting bytes if callback has been omitted, otherwise `undefined`\r\n     * @inner\r\n     */\r\n    function _crypt(b, salt, rounds, callback, progressCallback) {\r\n        var cdata = C_ORIG.slice(),\r\n            clen = cdata.length,\r\n            err;\r\n\r\n        // Validate\r\n        if (rounds < 4 || rounds > 31) {\r\n            err = Error(\"Illegal number of rounds (4-31): \"+rounds);\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        if (salt.length !== BCRYPT_SALT_LEN) {\r\n            err =Error(\"Illegal salt length: \"+salt.length+\" != \"+BCRYPT_SALT_LEN);\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        rounds = (1 << rounds) >>> 0;\r\n\r\n        var P, S, i = 0, j;\r\n\r\n        //Use typed arrays when available - huge speedup!\r\n        if (Int32Array) {\r\n            P = new Int32Array(P_ORIG);\r\n            S = new Int32Array(S_ORIG);\r\n        } else {\r\n            P = P_ORIG.slice();\r\n            S = S_ORIG.slice();\r\n        }\r\n\r\n        _ekskey(salt, b, P, S);\r\n\r\n        /**\r\n         * Calcualtes the next round.\r\n         * @returns {Array.<number>|undefined} Resulting array if callback has been omitted, otherwise `undefined`\r\n         * @inner\r\n         */\r\n        function next() {\r\n            if (progressCallback)\r\n                progressCallback(i / rounds);\r\n            if (i < rounds) {\r\n                var start = Date.now();\r\n                for (; i < rounds;) {\r\n                    i = i + 1;\r\n                    _key(b, P, S);\r\n                    _key(salt, P, S);\r\n                    if (Date.now() - start > MAX_EXECUTION_TIME)\r\n                        break;\r\n                }\r\n            } else {\r\n                for (i = 0; i < 64; i++)\r\n                    for (j = 0; j < (clen >> 1); j++)\r\n                        _encipher(cdata, j << 1, P, S);\r\n                var ret = [];\r\n                for (i = 0; i < clen; i++)\r\n                    ret.push(((cdata[i] >> 24) & 0xff) >>> 0),\r\n                    ret.push(((cdata[i] >> 16) & 0xff) >>> 0),\r\n                    ret.push(((cdata[i] >> 8) & 0xff) >>> 0),\r\n                    ret.push((cdata[i] & 0xff) >>> 0);\r\n                if (callback) {\r\n                    callback(null, ret);\r\n                    return;\r\n                } else\r\n                    return ret;\r\n            }\r\n            if (callback)\r\n                nextTick(next);\r\n        }\r\n\r\n        // Async\r\n        if (typeof callback !== 'undefined') {\r\n            next();\r\n\r\n            // Sync\r\n        } else {\r\n            var res;\r\n            while (true)\r\n                if (typeof(res = next()) !== 'undefined')\r\n                    return res || [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Internally hashes a string.\r\n     * @param {string} s String to hash\r\n     * @param {?string} salt Salt to use, actually never null\r\n     * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash. If omitted,\r\n     *  hashing is perormed synchronously.\r\n     *  @param {function(number)=} progressCallback Callback called with the current progress\r\n     * @returns {string|undefined} Resulting hash if callback has been omitted, otherwise `undefined`\r\n     * @inner\r\n     */\r\n    function _hash(s, salt, callback, progressCallback) {\r\n        var err;\r\n        if (typeof s !== 'string' || typeof salt !== 'string') {\r\n            err = Error(\"Invalid string / salt: Not a string\");\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            }\r\n            else\r\n                throw err;\r\n        }\r\n\r\n        // Validate the salt\r\n        var minor, offset;\r\n        if (salt.charAt(0) !== '$' || salt.charAt(1) !== '2') {\r\n            err = Error(\"Invalid salt version: \"+salt.substring(0,2));\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            }\r\n            else\r\n                throw err;\r\n        }\r\n        if (salt.charAt(2) === '$')\r\n            minor = String.fromCharCode(0),\r\n            offset = 3;\r\n        else {\r\n            minor = salt.charAt(2);\r\n            if ((minor !== 'a' && minor !== 'b' && minor !== 'y') || salt.charAt(3) !== '$') {\r\n                err = Error(\"Invalid salt revision: \"+salt.substring(2,4));\r\n                if (callback) {\r\n                    nextTick(callback.bind(this, err));\r\n                    return;\r\n                } else\r\n                    throw err;\r\n            }\r\n            offset = 4;\r\n        }\r\n\r\n        // Extract number of rounds\r\n        if (salt.charAt(offset + 2) > '$') {\r\n            err = Error(\"Missing salt rounds\");\r\n            if (callback) {\r\n                nextTick(callback.bind(this, err));\r\n                return;\r\n            } else\r\n                throw err;\r\n        }\r\n        var r1 = parseInt(salt.substring(offset, offset + 1), 10) * 10,\r\n            r2 = parseInt(salt.substring(offset + 1, offset + 2), 10),\r\n            rounds = r1 + r2,\r\n            real_salt = salt.substring(offset + 3, offset + 25);\r\n        s += minor >= 'a' ? \"\\x00\" : \"\";\r\n\r\n        var passwordb = stringToBytes(s),\r\n            saltb = base64_decode(real_salt, BCRYPT_SALT_LEN);\r\n\r\n        /**\r\n         * Finishes hashing.\r\n         * @param {Array.<number>} bytes Byte array\r\n         * @returns {string}\r\n         * @inner\r\n         */\r\n        function finish(bytes) {\r\n            var res = [];\r\n            res.push(\"$2\");\r\n            if (minor >= 'a')\r\n                res.push(minor);\r\n            res.push(\"$\");\r\n            if (rounds < 10)\r\n                res.push(\"0\");\r\n            res.push(rounds.toString());\r\n            res.push(\"$\");\r\n            res.push(base64_encode(saltb, saltb.length));\r\n            res.push(base64_encode(bytes, C_ORIG.length * 4 - 1));\r\n            return res.join('');\r\n        }\r\n\r\n        // Sync\r\n        if (typeof callback == 'undefined')\r\n            return finish(_crypt(passwordb, saltb, rounds));\r\n\r\n        // Async\r\n        else {\r\n            _crypt(passwordb, saltb, rounds, function(err, bytes) {\r\n                if (err)\r\n                    callback(err, null);\r\n                else\r\n                    callback(null, finish(bytes));\r\n            }, progressCallback);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Encodes a byte array to base64 with up to len bytes of input, using the custom bcrypt alphabet.\r\n     * @function\r\n     * @param {!Array.<number>} b Byte array\r\n     * @param {number} len Maximum input length\r\n     * @returns {string}\r\n     * @expose\r\n     */\r\n    bcrypt.encodeBase64 = base64_encode;\r\n\r\n    /**\r\n     * Decodes a base64 encoded string to up to len bytes of output, using the custom bcrypt alphabet.\r\n     * @function\r\n     * @param {string} s String to decode\r\n     * @param {number} len Maximum output length\r\n     * @returns {!Array.<number>}\r\n     * @expose\r\n     */\r\n    bcrypt.decodeBase64 = base64_decode;\r\n\r\n    return bcrypt;\r\n}));\r\n", "import bcrypt from 'bcryptjs';\r\n\r\n// Generate a secure random session ID\r\nexport async function generateSessionId() {\r\n  const array = new Uint8Array(32);\r\n  crypto.getRandomValues(array);\r\n  return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\r\n}\r\n\r\n// Hash password using bcrypt\r\nexport async function hashPassword(password) {\r\n  const saltRounds = 12;\r\n  return await bcrypt.hash(password, saltRounds);\r\n}\r\n\r\n// Verify password against hash\r\nexport async function verifyPassword(password, hash) {\r\n  return await bcrypt.compare(password, hash);\r\n}\r\n\r\n// Generate a secure user ID\r\nexport function generateUserId() {\r\n  const array = new Uint8Array(16);\r\n  crypto.getRandomValues(array);\r\n  return Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');\r\n}\r\n\r\n// Create session cookie\r\nexport function createSessionCookie(sessionId, maxAge = 30 * 24 * 60 * 60) { // 30 days default\r\n  return `session=${sessionId}; HttpOnly; Secure; SameSite=Strict; Max-Age=${maxAge}; Path=/`;\r\n}\r\n\r\n// Parse cookies from request headers\r\nexport function parseCookies(cookieHeader) {\r\n  const cookies = {};\r\n  if (cookieHeader) {\r\n    cookieHeader.split(';').forEach(cookie => {\r\n      const [name, value] = cookie.trim().split('=');\r\n      if (name && value) {\r\n        cookies[name] = decodeURIComponent(value);\r\n      }\r\n    });\r\n  }\r\n  return cookies;\r\n}\r\n\r\n// Validate email format\r\nexport function isValidEmail(email) {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n}\r\n\r\n// Validate password strength\r\nexport function isValidPassword(password) {\r\n  // At least 8 characters, 1 uppercase, 1 lowercase, 1 number\r\n  const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d@$!%*?&]{8,}$/;\r\n  return passwordRegex.test(password);\r\n}\r\n\r\n// Create authenticated user response (without sensitive data)\r\nexport function createUserResponse(user) {\r\n  return {\r\n    id: user.id,\r\n    username: user.username,\r\n    email: user.email,\r\n    created_at: user.created_at\r\n  };\r\n}\r\n\r\n// Database helper: Create user\r\nexport async function createUser(env, userData) {\r\n  const { username, email, password } = userData;\r\n  \r\n  // Validate input\r\n  if (!username || !email || !password) {\r\n    throw new Error('Username, email, and password are required');\r\n  }\r\n  \r\n  if (!isValidEmail(email)) {\r\n    throw new Error('Invalid email format');\r\n  }\r\n  \r\n  if (!isValidPassword(password)) {\r\n    throw new Error('Password must be at least 8 characters with uppercase, lowercase, and number');\r\n  }\r\n\r\n  // Check if user already exists\r\n  const existingUser = await env.DB.prepare(\r\n    'SELECT id FROM users WHERE email = ? OR username = ?'\r\n  ).bind(email, username).first();\r\n\r\n  if (existingUser) {\r\n    throw new Error('User with this email or username already exists');\r\n  }\r\n\r\n  // Create new user\r\n  const userId = generateUserId();\r\n  const passwordHash = await hashPassword(password);\r\n  \r\n  const result = await env.DB.prepare(`\r\n    INSERT INTO users (id, username, email, password_hash, created_at, updated_at)\r\n    VALUES (?, ?, ?, ?, datetime('now'), datetime('now'))\r\n  `).bind(userId, username, email, passwordHash).run();\r\n\r\n  if (!result.success) {\r\n    throw new Error('Failed to create user');\r\n  }\r\n\r\n  return {\r\n    id: userId,\r\n    username,\r\n    email,\r\n    created_at: new Date().toISOString()\r\n  };\r\n}\r\n\r\n// Database helper: Get user by email\r\nexport async function getUserByEmail(env, email) {\r\n  return await env.DB.prepare(\r\n    'SELECT * FROM users WHERE email = ?'\r\n  ).bind(email).first();\r\n}\r\n\r\n// Database helper: Get user by ID\r\nexport async function getUserById(env, userId) {\r\n  return await env.DB.prepare(\r\n    'SELECT * FROM users WHERE id = ?'\r\n  ).bind(userId).first();\r\n}\r\n\r\n// Database helper: Create session\r\nexport async function createSession(env, userId) {\r\n  const sessionId = await generateSessionId();\r\n  const expiresAt = new Date(Date.now() + 30 * 24 * 60 * 60 * 1000); // 30 days\r\n\r\n  const result = await env.DB.prepare(`\r\n    INSERT INTO sessions (id, user_id, expires_at, created_at)\r\n    VALUES (?, ?, ?, datetime('now'))\r\n  `).bind(sessionId, userId, expiresAt.toISOString()).run();\r\n\r\n  if (!result.success) {\r\n    throw new Error('Failed to create session');\r\n  }\r\n\r\n  return sessionId;\r\n}\r\n\r\n// Database helper: Get session with user\r\nexport async function getSessionWithUser(env, sessionId) {\r\n  const result = await env.DB.prepare(`\r\n    SELECT \r\n      s.id as session_id,\r\n      s.user_id,\r\n      s.expires_at,\r\n      u.id,\r\n      u.username,\r\n      u.email,\r\n      u.created_at as user_created_at\r\n    FROM sessions s\r\n    JOIN users u ON s.user_id = u.id\r\n    WHERE s.id = ? AND s.expires_at > datetime('now')\r\n  `).bind(sessionId).first();\r\n\r\n  if (!result) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    session: {\r\n      id: result.session_id,\r\n      user_id: result.user_id,\r\n      expires_at: result.expires_at\r\n    },\r\n    user: {\r\n      id: result.id,\r\n      username: result.username,\r\n      email: result.email,\r\n      created_at: result.user_created_at\r\n    }\r\n  };\r\n}\r\n\r\n// Database helper: Delete session\r\nexport async function deleteSession(env, sessionId) {\r\n  return await env.DB.prepare(\r\n    'DELETE FROM sessions WHERE id = ?'\r\n  ).bind(sessionId).run();\r\n}\r\n\r\n// Database helper: Clean up expired sessions\r\nexport async function cleanupExpiredSessions(env) {\r\n  return await env.DB.prepare(\r\n    'DELETE FROM sessions WHERE expires_at <= datetime(\"now\")'\r\n  ).run();\r\n}", "import { getUserByEmail, verifyPassword, createSession, createSessionCookie, createUserResponse } from '../../auth/utils.js';\r\n\r\nexport async function onRequestPost({ request, env }) {\r\n  try {\r\n    // Parse request body\r\n    const body = await request.json();\r\n    const { email, password } = body;\r\n\r\n    // Validate input\r\n    if (!email || !password) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Email and password are required'\r\n      }), {\r\n        status: 400,\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n    }\r\n\r\n    // Get user by email\r\n    const user = await getUserByEmail(env, email);\r\n    if (!user) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Invalid email or password'\r\n      }), {\r\n        status: 401,\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n    }\r\n\r\n    // Verify password\r\n    const isValidPassword = await verifyPassword(password, user.password_hash);\r\n    if (!isValidPassword) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Invalid email or password'\r\n      }), {\r\n        status: 401,\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n    }\r\n\r\n    // Create session\r\n    const sessionId = await createSession(env, user.id);\r\n\r\n    // Create response with user data (without sensitive info)\r\n    const responseData = {\r\n      success: true,\r\n      message: 'Login successful',\r\n      user: createUserResponse(user)\r\n    };\r\n\r\n    // Create response with session cookie\r\n    const response = new Response(JSON.stringify(responseData), {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Set-Cookie': createSessionCookie(sessionId)\r\n      }\r\n    });\r\n\r\n    return response;\r\n\r\n  } catch (error) {\r\n    console.error('Login error:', error);\r\n    \r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Login failed'\r\n    }), {\r\n      status: 500,\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n}\r\n\r\n// Handle OPTIONS request for CORS\r\nexport async function onRequestOptions({ request }) {\r\n  return new Response(null, {\r\n    status: 200,\r\n    headers: {\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n      'Access-Control-Max-Age': '86400'\r\n    }\r\n  });\r\n}", "export async function onRequestPost({ request, env }) {\r\n  try {\r\n    // Get session ID from cookie\r\n    const cookieHeader = request.headers.get('Cookie');\r\n    let sessionId = null;\r\n\r\n    if (cookieHeader) {\r\n      const cookies = cookieHeader.split(';').map(cookie => cookie.trim());\r\n      const sessionCookie = cookies.find(cookie => cookie.startsWith('session_id='));\r\n      if (sessionCookie) {\r\n        sessionId = sessionCookie.split('=')[1];\r\n      }\r\n    }\r\n\r\n    // Delete session from database if it exists\r\n    if (sessionId) {\r\n      try {\r\n        const stmt = env.DB.prepare('DELETE FROM sessions WHERE id = ?');\r\n        await stmt.bind(sessionId).run();\r\n      } catch (error) {\r\n        console.error('Error deleting session:', error);\r\n        // Continue with logout even if session deletion fails\r\n      }\r\n    }\r\n\r\n    // Create response that clears the session cookie\r\n    const response = new Response(JSON.stringify({\r\n      success: true,\r\n      message: 'Logout successful'\r\n    }), {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Set-Cookie': 'session_id=; Path=/; HttpOnly; Secure; SameSite=Strict; Max-Age=0'\r\n      }\r\n    });\r\n\r\n    return response;\r\n\r\n  } catch (error) {\r\n    console.error('Logout error:', error);\r\n    \r\n    // Even if there's an error, clear the cookie and return success\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      message: 'Logout successful'\r\n    }), {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Set-Cookie': 'session_id=; Path=/; HttpOnly; Secure; SameSite=Strict; Max-Age=0'\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// Handle OPTIONS request for CORS\r\nexport async function onRequestOptions({ request }) {\r\n  return new Response(null, {\r\n    status: 200,\r\n    headers: {\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n      'Access-Control-Max-Age': '86400'\r\n    }\r\n  });\r\n}", "import { getSessionWithUser } from './utils.js';\r\n\r\n/**\r\n * Middleware to authenticate requests\r\n * Returns user data if authenticated, null if not\r\n */\r\nexport async function authenticateRequest(request, env) {\r\n  try {\r\n    // Get session ID from cookie\r\n    const cookieHeader = request.headers.get('Cookie');\r\n    let sessionId = null;\r\n\r\n    if (cookieHeader) {\r\n      const cookies = cookieHeader.split(';').map(cookie => cookie.trim());\r\n      const sessionCookie = cookies.find(cookie => cookie.startsWith('session_id='));\r\n      if (sessionCookie) {\r\n        sessionId = sessionCookie.split('=')[1];\r\n      }\r\n    }\r\n\r\n    if (!sessionId) {\r\n      return null;\r\n    }\r\n\r\n    // Get session with user data\r\n    const sessionData = await getSessionWithUser(env, sessionId);\r\n    \r\n    if (!sessionData) {\r\n      return null;\r\n    }\r\n\r\n    return sessionData.user;\r\n  } catch (error) {\r\n    console.error('Authentication middleware error:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Middleware to require authentication\r\n * Returns error response if not authenticated\r\n */\r\nexport async function requireAuth(request, env) {\r\n  const user = await authenticateRequest(request, env);\r\n  \r\n  if (!user) {\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Authentication required'\r\n    }), {\r\n      status: 401,\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n\r\n  return user;\r\n}\r\n\r\n/**\r\n * CORS headers for API responses\r\n */\r\nexport const corsHeaders = {\r\n  'Access-Control-Allow-Origin': '*',\r\n  'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n  'Access-Control-Allow-Headers': 'Content-Type, Authorization',\r\n  'Access-Control-Max-Age': '86400'\r\n};\r\n\r\n/**\r\n * Handle OPTIONS request for CORS\r\n */\r\nexport function handleCors() {\r\n  return new Response(null, {\r\n    status: 200,\r\n    headers: corsHeaders\r\n  });\r\n}\r\n\r\n/**\r\n * Add CORS headers to response\r\n */\r\nexport function addCorsHeaders(response) {\r\n  Object.entries(corsHeaders).forEach(([key, value]) => {\r\n    response.headers.set(key, value);\r\n  });\r\n  return response;\r\n}", "import { requireAuth, handleCors, addCorsHeaders } from '../../auth/middleware.js';\r\nimport { createUserResponse } from '../../auth/utils.js';\r\n\r\nexport async function onRequestGet({ request, env }) {\r\n  try {\r\n    // Check authentication\r\n    const user = await requireAuth(request, env);\r\n    \r\n    // If requireAuth returns a Response (error), return it\r\n    if (user instanceof Response) {\r\n      return addCorsHeaders(user);\r\n    }\r\n\r\n    // Return user profile data\r\n    const response = new Response(JSON.stringify({\r\n      success: true,\r\n      user: createUserResponse(user)\r\n    }), {\r\n      status: 200,\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n\r\n    return addCorsHeaders(response);\r\n\r\n  } catch (error) {\r\n    console.error('Get user profile error:', error);\r\n    \r\n    const response = new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to get user profile'\r\n    }), {\r\n      status: 500,\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n\r\n    return addCorsHeaders(response);\r\n  }\r\n}\r\n\r\n// Handle OPTIONS request for CORS\r\nexport async function onRequestOptions({ request }) {\r\n  return handleCors();\r\n}", "import { createUser, createSession, createSessionCookie, createUserResponse } from '../../auth/utils.js';\r\n\r\nexport async function onRequestPost({ request, env }) {\r\n  try {\r\n    // Parse request body\r\n    const body = await request.json();\r\n    const { username, email, password } = body;\r\n\r\n    // Create new user\r\n    const user = await createUser(env, { username, email, password });\r\n\r\n    // Create session for the new user\r\n    const sessionId = await createSession(env, user.id);\r\n\r\n    // Create response with user data (without sensitive info)\r\n    const responseData = {\r\n      success: true,\r\n      message: 'User registered successfully',\r\n      user: createUserResponse(user)\r\n    };\r\n\r\n    // Create response with session cookie\r\n    const response = new Response(JSON.stringify(responseData), {\r\n      status: 201,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Set-Cookie': createSessionCookie(sessionId)\r\n      }\r\n    });\r\n\r\n    return response;\r\n\r\n  } catch (error) {\r\n    console.error('Registration error:', error);\r\n    \r\n    // Return appropriate error response\r\n    const errorResponse = {\r\n      success: false,\r\n      message: error.message || 'Registration failed'\r\n    };\r\n\r\n    return new Response(JSON.stringify(errorResponse), {\r\n      status: 400,\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// Handle OPTIONS request for CORS\r\nexport async function onRequestOptions({ request }) {\r\n  return new Response(null, {\r\n    status: 200,\r\n    headers: {\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Access-Control-Allow-Methods': 'POST, OPTIONS',\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n      'Access-Control-Max-Age': '86400'\r\n    }\r\n  });\r\n}", "import { getSessionWithUser, createUserResponse } from '../../auth/utils.js';\r\n\r\nexport async function onRequestGet({ request, env }) {\r\n  try {\r\n    // Get session ID from cookie\r\n    const cookieHeader = request.headers.get('Cookie');\r\n    let sessionId = null;\r\n\r\n    if (cookieHeader) {\r\n      const cookies = cookieHeader.split(';').map(cookie => cookie.trim());\r\n      const sessionCookie = cookies.find(cookie => cookie.startsWith('session_id='));\r\n      if (sessionCookie) {\r\n        sessionId = sessionCookie.split('=')[1];\r\n      }\r\n    }\r\n\r\n    if (!sessionId) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        authenticated: false,\r\n        message: 'No session found'\r\n      }), {\r\n        status: 401,\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n    }\r\n\r\n    // Get session with user data\r\n    const sessionData = await getSessionWithUser(env, sessionId);\r\n\r\n    if (!sessionData) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        authenticated: false,\r\n        message: 'Invalid or expired session'\r\n      }), {\r\n        status: 401,\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n    }\r\n\r\n    // Return user data (without sensitive info)\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      authenticated: true,\r\n      user: createUserResponse(sessionData.user)\r\n    }), {\r\n      status: 200,\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Session validation error:', error);\r\n    \r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      authenticated: false,\r\n      message: 'Session validation failed'\r\n    }), {\r\n      status: 500,\r\n      headers: { 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n}\r\n\r\n// Handle OPTIONS request for CORS\r\nexport async function onRequestOptions({ request }) {\r\n  return new Response(null, {\r\n    status: 200,\r\n    headers: {\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n      'Access-Control-Max-Age': '86400'\r\n    }\r\n  });\r\n}", "import { addCorsHeaders } from '../../auth/middleware.js';\r\n\r\nexport async function onRequestOptions(context) {\r\n  return new Response(null, {\r\n    status: 200,\r\n    headers: addCorsHeaders()\r\n  });\r\n}\r\n\r\nexport async function onRequestGet(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Get template ID from URL\r\n    const url = new URL(request.url);\r\n    const templateId = url.searchParams.get('id');\r\n    const format = url.searchParams.get('format') || 'html'; // html or json\r\n\r\n    if (!templateId) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Template ID is required'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Get form template\r\n    const template = await env.DB.prepare(`\r\n      SELECT id, name, description, form_schema, created_at\r\n      FROM form_templates \r\n      WHERE id = ?\r\n    `).bind(templateId).first();\r\n\r\n    if (!template) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Form template not found'\r\n      }), {\r\n        status: 404,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    const formSchema = JSON.parse(template.form_schema);\r\n\r\n    // Return JSON format if requested\r\n    if (format === 'json') {\r\n      return new Response(JSON.stringify({\r\n        success: true,\r\n        data: {\r\n          id: template.id,\r\n          name: template.name,\r\n          description: template.description,\r\n          schema: formSchema,\r\n          created_at: template.created_at\r\n        }\r\n      }), {\r\n        status: 200,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Generate HTML form\r\n    const htmlForm = generateFormHTML(template, formSchema);\r\n\r\n    return new Response(htmlForm, {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'text/html',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error rendering form:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to render form'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport async function onRequestPost(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Get template ID from URL\r\n    const url = new URL(request.url);\r\n    const templateId = url.searchParams.get('id');\r\n\r\n    if (!templateId) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Template ID is required'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Parse form data (handle both JSON and form-encoded data)\r\n    let submissionData;\r\n    const contentType = request.headers.get('content-type');\r\n    \r\n    if (contentType && contentType.includes('application/json')) {\r\n      const body = await request.json();\r\n      submissionData = body.submission_data || body;\r\n    } else if (contentType && contentType.includes('application/x-www-form-urlencoded')) {\r\n      const formData = await request.formData();\r\n      submissionData = {};\r\n      for (const [key, value] of formData.entries()) {\r\n        submissionData[key] = value;\r\n      }\r\n    } else {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Invalid content type. Use application/json or application/x-www-form-urlencoded'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Check if template exists\r\n    const template = await env.DB.prepare(`\r\n      SELECT id, form_schema FROM form_templates \r\n      WHERE id = ?\r\n    `).bind(templateId).first();\r\n\r\n    if (!template) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Form template not found'\r\n      }), {\r\n        status: 404,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Validate submission data\r\n    const formSchema = JSON.parse(template.form_schema);\r\n    const validationResult = validateSubmissionData(submissionData, formSchema);\r\n    \r\n    if (!validationResult.isValid) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Invalid form data',\r\n        errors: validationResult.errors\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Create form submission\r\n    const submissionId = crypto.randomUUID();\r\n    const now = new Date().toISOString();\r\n\r\n    await env.DB.prepare(`\r\n      INSERT INTO form_submissions (id, template_id, submission_data, submitted_at)\r\n      VALUES (?, ?, ?, ?)\r\n    `).bind(\r\n      submissionId,\r\n      templateId,\r\n      JSON.stringify(submissionData),\r\n      now\r\n    ).run();\r\n\r\n    // Return success response\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      message: 'Form submitted successfully',\r\n      data: {\r\n        submission_id: submissionId,\r\n        submitted_at: now\r\n      }\r\n    }), {\r\n      status: 201,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error submitting form:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to submit form'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// Helper function to generate HTML form\r\nfunction generateFormHTML(template, formSchema) {\r\n  const fields = formSchema.fields || [];\r\n  \r\n  let formFields = fields.map(field => {\r\n    let html = `<div class=\"form-group\">`;\r\n    html += `<label for=\"${field.name}\">${field.label || field.name}`;\r\n    if (field.required) {\r\n      html += ' <span class=\"required\">*</span>';\r\n    }\r\n    html += '</label>';\r\n\r\n    switch (field.type) {\r\n      case 'text':\r\n      case 'email':\r\n      case 'url':\r\n      case 'tel':\r\n        html += `<input type=\"${field.type}\" id=\"${field.name}\" name=\"${field.name}\" `;\r\n        if (field.placeholder) html += `placeholder=\"${field.placeholder}\" `;\r\n        if (field.required) html += 'required ';\r\n        html += '/>';\r\n        break;\r\n      case 'number':\r\n        html += `<input type=\"number\" id=\"${field.name}\" name=\"${field.name}\" `;\r\n        if (field.min !== undefined) html += `min=\"${field.min}\" `;\r\n        if (field.max !== undefined) html += `max=\"${field.max}\" `;\r\n        if (field.required) html += 'required ';\r\n        html += '/>';\r\n        break;\r\n      case 'textarea':\r\n        html += `<textarea id=\"${field.name}\" name=\"${field.name}\" `;\r\n        if (field.placeholder) html += `placeholder=\"${field.placeholder}\" `;\r\n        if (field.required) html += 'required ';\r\n        html += '></textarea>';\r\n        break;\r\n      case 'select':\r\n        html += `<select id=\"${field.name}\" name=\"${field.name}\" `;\r\n        if (field.required) html += 'required ';\r\n        html += '>';\r\n        if (!field.required) {\r\n          html += '<option value=\"\">-- Select an option --</option>';\r\n        }\r\n        if (field.options) {\r\n          field.options.forEach(option => {\r\n            html += `<option value=\"${option.value}\">${option.label}</option>`;\r\n          });\r\n        }\r\n        html += '</select>';\r\n        break;\r\n      case 'checkbox':\r\n        html += `<input type=\"checkbox\" id=\"${field.name}\" name=\"${field.name}\" value=\"true\" `;\r\n        if (field.required) html += 'required ';\r\n        html += '/>';\r\n        break;\r\n      case 'radio':\r\n        if (field.options) {\r\n          field.options.forEach((option, index) => {\r\n            html += `<div class=\"radio-option\">`;\r\n            html += `<input type=\"radio\" id=\"${field.name}_${index}\" name=\"${field.name}\" value=\"${option.value}\" `;\r\n            if (field.required) html += 'required ';\r\n            html += '/>';\r\n            html += `<label for=\"${field.name}_${index}\">${option.label}</label>`;\r\n            html += '</div>';\r\n          });\r\n        }\r\n        break;\r\n      default:\r\n        html += `<input type=\"text\" id=\"${field.name}\" name=\"${field.name}\" `;\r\n        if (field.required) html += 'required ';\r\n        html += '/>';\r\n    }\r\n\r\n    if (field.description) {\r\n      html += `<small class=\"field-description\">${field.description}</small>`;\r\n    }\r\n\r\n    html += '</div>';\r\n    return html;\r\n  }).join('');\r\n\r\n  return `\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>${template.name}</title>\r\n    <style>\r\n        body {\r\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\r\n            max-width: 600px;\r\n            margin: 0 auto;\r\n            padding: 20px;\r\n            background-color: #f5f5f5;\r\n        }\r\n        .form-container {\r\n            background: white;\r\n            padding: 30px;\r\n            border-radius: 8px;\r\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n        }\r\n        h1 { color: #333; margin-bottom: 10px; }\r\n        .description { color: #666; margin-bottom: 30px; }\r\n        .form-group { margin-bottom: 20px; }\r\n        label { \r\n            display: block; \r\n            margin-bottom: 5px; \r\n            font-weight: 500; \r\n            color: #333;\r\n        }\r\n        .required { color: #e74c3c; }\r\n        input, textarea, select {\r\n            width: 100%;\r\n            padding: 10px;\r\n            border: 1px solid #ddd;\r\n            border-radius: 4px;\r\n            font-size: 14px;\r\n            box-sizing: border-box;\r\n        }\r\n        input:focus, textarea:focus, select:focus {\r\n            outline: none;\r\n            border-color: #007bff;\r\n            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);\r\n        }\r\n        textarea { resize: vertical; min-height: 100px; }\r\n        .radio-option { margin-bottom: 8px; }\r\n        .radio-option input { width: auto; margin-right: 8px; }\r\n        .radio-option label { display: inline; font-weight: normal; }\r\n        input[type=\"checkbox\"] { width: auto; margin-right: 8px; }\r\n        .field-description { \r\n            display: block; \r\n            color: #666; \r\n            font-size: 12px; \r\n            margin-top: 5px;\r\n        }\r\n        .submit-btn {\r\n            background-color: #007bff;\r\n            color: white;\r\n            padding: 12px 30px;\r\n            border: none;\r\n            border-radius: 4px;\r\n            font-size: 16px;\r\n            cursor: pointer;\r\n            margin-top: 20px;\r\n        }\r\n        .submit-btn:hover { background-color: #0056b3; }\r\n        .success-message, .error-message {\r\n            padding: 15px;\r\n            border-radius: 4px;\r\n            margin-bottom: 20px;\r\n        }\r\n        .success-message {\r\n            background-color: #d4edda;\r\n            color: #155724;\r\n            border: 1px solid #c3e6cb;\r\n        }\r\n        .error-message {\r\n            background-color: #f8d7da;\r\n            color: #721c24;\r\n            border: 1px solid #f5c6cb;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"form-container\">\r\n        <h1>${template.name}</h1>\r\n        ${template.description ? `<p class=\"description\">${template.description}</p>` : ''}\r\n        \r\n        <form id=\"dynamicForm\" method=\"POST\">\r\n            ${formFields}\r\n            <button type=\"submit\" class=\"submit-btn\">Submit</button>\r\n        </form>\r\n    </div>\r\n\r\n    <script>\r\n        document.getElementById('dynamicForm').addEventListener('submit', async function(e) {\r\n            e.preventDefault();\r\n            \r\n            const formData = new FormData(this);\r\n            const submitData = {};\r\n            \r\n            // Convert FormData to object\r\n            for (const [key, value] of formData.entries()) {\r\n                submitData[key] = value;\r\n            }\r\n            \r\n            try {\r\n                const response = await fetch(window.location.href, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({ submission_data: submitData })\r\n                });\r\n                \r\n                const result = await response.json();\r\n                \r\n                if (result.success) {\r\n                    // Show success message\r\n                    const successDiv = document.createElement('div');\r\n                    successDiv.className = 'success-message';\r\n                    successDiv.textContent = 'Form submitted successfully!';\r\n                    this.parentNode.insertBefore(successDiv, this);\r\n                    this.reset();\r\n                } else {\r\n                    throw new Error(result.message || 'Failed to submit form');\r\n                }\r\n            } catch (error) {\r\n                // Show error message\r\n                const errorDiv = document.createElement('div');\r\n                errorDiv.className = 'error-message';\r\n                errorDiv.textContent = 'Error: ' + error.message;\r\n                this.parentNode.insertBefore(errorDiv, this);\r\n            }\r\n        });\r\n    </script>\r\n</body>\r\n</html>`;\r\n}\r\n\r\n// Helper function to validate submission data against form schema\r\nfunction validateSubmissionData(submissionData, formSchema) {\r\n  const errors = [];\r\n  \r\n  try {\r\n    if (!formSchema.fields || !Array.isArray(formSchema.fields)) {\r\n      return { isValid: true, errors: [] };\r\n    }\r\n\r\n    for (const field of formSchema.fields) {\r\n      const value = submissionData[field.name];\r\n      \r\n      // Check required fields\r\n      if (field.required && (!value || value === '')) {\r\n        errors.push(`${field.label || field.name} is required`);\r\n        continue;\r\n      }\r\n\r\n      // Skip validation if field is empty and not required\r\n      if (!value || value === '') continue;\r\n\r\n      // Type validation\r\n      switch (field.type) {\r\n        case 'email':\r\n          const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n          if (!emailRegex.test(value)) {\r\n            errors.push(`${field.label || field.name} must be a valid email address`);\r\n          }\r\n          break;\r\n        case 'number':\r\n          if (isNaN(Number(value))) {\r\n            errors.push(`${field.label || field.name} must be a valid number`);\r\n          }\r\n          break;\r\n        case 'url':\r\n          try {\r\n            new URL(value);\r\n          } catch {\r\n            errors.push(`${field.label || field.name} must be a valid URL`);\r\n          }\r\n          break;\r\n      }\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error('Validation error:', error);\r\n    return { isValid: true, errors: [] };\r\n  }\r\n}", "import { requireAuth, handleCors, addCorsHeaders } from '../../auth/middleware.js';\r\n\r\nexport async function onRequestOptions(context) {\r\n  return handleCors();\r\n}\r\n\r\nexport async function onRequestGet(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Authenticate user\r\n    const user = await requireAuth(request, env);\r\n    if (user instanceof Response) return user;\r\n\r\n    // Get query parameters\r\n    const url = new URL(request.url);\r\n    const templateId = url.searchParams.get('template_id');\r\n    const page = parseInt(url.searchParams.get('page') || '1');\r\n    const limit = parseInt(url.searchParams.get('limit') || '10');\r\n    const offset = (page - 1) * limit;\r\n\r\n    let query = `\r\n      SELECT fs.id, fs.template_id, fs.submission_data, fs.submitted_at,\r\n             ft.name as template_name\r\n      FROM form_submissions fs\r\n      INNER JOIN form_templates ft ON fs.template_id = ft.id\r\n      WHERE ft.user_id = ?\r\n    `;\r\n    let params = [user.id];\r\n\r\n    // Filter by template if specified\r\n    if (templateId) {\r\n      query += ` AND fs.template_id = ?`;\r\n      params.push(templateId);\r\n    }\r\n\r\n    query += ` ORDER BY fs.submitted_at DESC LIMIT ? OFFSET ?`;\r\n    params.push(limit, offset);\r\n\r\n    const submissions = await env.DB.prepare(query).bind(...params).all();\r\n\r\n    // Get total count\r\n    let countQuery = `\r\n      SELECT COUNT(*) as total \r\n      FROM form_submissions fs\r\n      INNER JOIN form_templates ft ON fs.template_id = ft.id\r\n      WHERE ft.user_id = ?\r\n    `;\r\n    let countParams = [user.id];\r\n\r\n    if (templateId) {\r\n      countQuery += ` AND fs.template_id = ?`;\r\n      countParams.push(templateId);\r\n    }\r\n\r\n    const countResult = await env.DB.prepare(countQuery).bind(...countParams).first();\r\n\r\n    // Parse submission data\r\n    const processedSubmissions = (submissions.results || []).map(submission => ({\r\n      ...submission,\r\n      submission_data: JSON.parse(submission.submission_data)\r\n    }));\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      data: {\r\n        submissions: processedSubmissions,\r\n        pagination: {\r\n          page,\r\n          limit,\r\n          total: countResult.total,\r\n          totalPages: Math.ceil(countResult.total / limit)\r\n        }\r\n      }\r\n    }), {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error fetching form submissions:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to fetch form submissions'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport async function onRequestPost(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Parse request body\r\n    const body = await request.json();\r\n    const { template_id, submission_data } = body;\r\n\r\n    // Validate required fields\r\n    if (!template_id || !submission_data) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Template ID and submission data are required'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Validate submission_data is valid JSON\r\n    if (typeof submission_data !== 'object') {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Submission data must be a valid JSON object'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Check if template exists\r\n    const template = await env.DB.prepare(`\r\n      SELECT id, form_schema FROM form_templates \r\n      WHERE id = ?\r\n    `).bind(template_id).first();\r\n\r\n    if (!template) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Form template not found'\r\n      }), {\r\n        status: 404,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Basic validation: check if submitted data matches form schema structure\r\n    const formSchema = JSON.parse(template.form_schema);\r\n    const validationResult = validateSubmissionData(submission_data, formSchema);\r\n    \r\n    if (!validationResult.isValid) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Invalid submission data',\r\n        errors: validationResult.errors\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Create new form submission\r\n    const submissionId = crypto.randomUUID();\r\n    const now = new Date().toISOString();\r\n\r\n    await env.DB.prepare(`\r\n      INSERT INTO form_submissions (id, template_id, submission_data, submitted_at)\r\n      VALUES (?, ?, ?, ?)\r\n    `).bind(\r\n      submissionId,\r\n      template_id,\r\n      JSON.stringify(submission_data),\r\n      now\r\n    ).run();\r\n\r\n    // Return created submission\r\n    const submission = await env.DB.prepare(`\r\n      SELECT fs.id, fs.template_id, fs.submission_data, fs.submitted_at,\r\n             ft.name as template_name\r\n      FROM form_submissions fs\r\n      INNER JOIN form_templates ft ON fs.template_id = ft.id\r\n      WHERE fs.id = ?\r\n    `).bind(submissionId).first();\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      data: {\r\n        ...submission,\r\n        submission_data: JSON.parse(submission.submission_data)\r\n      }\r\n    }), {\r\n      status: 201,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error creating form submission:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to create form submission'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport async function onRequestDelete(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Authenticate user\r\n    const user = await requireAuth(request, env);\r\n    if (user instanceof Response) return user;\r\n\r\n    // Get submission ID from URL\r\n    const url = new URL(request.url);\r\n    const submissionId = url.searchParams.get('id');\r\n\r\n    if (!submissionId) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Submission ID is required'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Check if submission exists and user owns the template\r\n    const existingSubmission = await env.DB.prepare(`\r\n      SELECT fs.id \r\n      FROM form_submissions fs\r\n      INNER JOIN form_templates ft ON fs.template_id = ft.id\r\n      WHERE fs.id = ? AND ft.user_id = ?\r\n    `).bind(submissionId, user.id).first();\r\n\r\n    if (!existingSubmission) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Form submission not found'\r\n      }), {\r\n        status: 404,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Delete the submission\r\n    await env.DB.prepare(`\r\n      DELETE FROM form_submissions \r\n      WHERE id = ?\r\n    `).bind(submissionId).run();\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      message: 'Form submission deleted successfully'\r\n    }), {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error deleting form submission:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to delete form submission'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// Helper function to validate submission data against form schema\r\nfunction validateSubmissionData(submissionData, formSchema) {\r\n  const errors = [];\r\n  \r\n  try {\r\n    // Basic validation - check if formSchema has fields\r\n    if (!formSchema.fields || !Array.isArray(formSchema.fields)) {\r\n      return { isValid: true, errors: [] }; // Allow if no validation schema\r\n    }\r\n\r\n    // Check required fields\r\n    for (const field of formSchema.fields) {\r\n      if (field.required && (!submissionData[field.name] || submissionData[field.name] === '')) {\r\n        errors.push(`Field '${field.label || field.name}' is required`);\r\n      }\r\n\r\n      // Type validation for specific field types\r\n      if (submissionData[field.name] !== undefined && submissionData[field.name] !== '') {\r\n        const value = submissionData[field.name];\r\n        \r\n        switch (field.type) {\r\n          case 'email':\r\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n            if (!emailRegex.test(value)) {\r\n              errors.push(`Field '${field.label || field.name}' must be a valid email address`);\r\n            }\r\n            break;\r\n          case 'number':\r\n            if (isNaN(Number(value))) {\r\n              errors.push(`Field '${field.label || field.name}' must be a valid number`);\r\n            }\r\n            break;\r\n          case 'url':\r\n            try {\r\n              new URL(value);\r\n            } catch {\r\n              errors.push(`Field '${field.label || field.name}' must be a valid URL`);\r\n            }\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors\r\n    };\r\n\r\n  } catch (error) {\r\n    console.error('Validation error:', error);\r\n    return { isValid: true, errors: [] }; // Allow submission if validation fails\r\n  }\r\n}", "import { requireAuth, handleCors, addCorsHeaders } from '../../auth/middleware.js';\r\n\r\nexport async function onRequestOptions(context) {\r\n  return handleCors();\r\n}\r\n\r\nexport async function onRequestGet(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Authenticate user\r\n    const user = await requireAuth(request, env);\r\n    if (user instanceof Response) return user;\r\n\r\n    // Get query parameters\r\n    const url = new URL(request.url);\r\n    const page = parseInt(url.searchParams.get('page') || '1');\r\n    const limit = parseInt(url.searchParams.get('limit') || '10');\r\n    const offset = (page - 1) * limit;\r\n\r\n    // Get form templates for the user\r\n    const templates = await env.DB.prepare(`\r\n      SELECT id, name, description, form_schema, created_at, updated_at \r\n      FROM form_templates \r\n      WHERE user_id = ? \r\n      ORDER BY updated_at DESC \r\n      LIMIT ? OFFSET ?\r\n    `).bind(user.id, limit, offset).all();\r\n\r\n    // Get total count\r\n    const countResult = await env.DB.prepare(`\r\n      SELECT COUNT(*) as total \r\n      FROM form_templates \r\n      WHERE user_id = ?\r\n    `).bind(user.id).first();\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      data: {\r\n        templates: templates.results || [],\r\n        pagination: {\r\n          page,\r\n          limit,\r\n          total: countResult.total,\r\n          totalPages: Math.ceil(countResult.total / limit)\r\n        }\r\n      }\r\n    }), {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error fetching form templates:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to fetch form templates'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport async function onRequestPost(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Authenticate user\r\n    const user = await requireAuth(request, env);\r\n    if (user instanceof Response) return user;\r\n\r\n    // Parse request body\r\n    const body = await request.json();\r\n    const { name, description, form_schema } = body;\r\n\r\n    // Validate required fields\r\n    if (!name || !form_schema) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Name and form schema are required'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Validate form_schema is valid JSON\r\n    if (typeof form_schema !== 'object') {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Form schema must be a valid JSON object'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Create new form template\r\n    const templateId = crypto.randomUUID();\r\n    const now = new Date().toISOString();\r\n\r\n    await env.DB.prepare(`\r\n      INSERT INTO form_templates (id, user_id, name, description, form_schema, created_at, updated_at)\r\n      VALUES (?, ?, ?, ?, ?, ?, ?)\r\n    `).bind(\r\n      templateId,\r\n      user.id,\r\n      name,\r\n      description || null,\r\n      JSON.stringify(form_schema),\r\n      now,\r\n      now\r\n    ).run();\r\n\r\n    // Return created template\r\n    const template = await env.DB.prepare(`\r\n      SELECT id, name, description, form_schema, created_at, updated_at \r\n      FROM form_templates \r\n      WHERE id = ?\r\n    `).bind(templateId).first();\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      data: {\r\n        ...template,\r\n        form_schema: JSON.parse(template.form_schema)\r\n      }\r\n    }), {\r\n      status: 201,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error creating form template:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to create form template'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport async function onRequestPut(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Authenticate user\r\n    const user = await requireAuth(request, env);\r\n    if (user instanceof Response) return user;\r\n\r\n    // Get template ID from URL\r\n    const url = new URL(request.url);\r\n    const templateId = url.searchParams.get('id');\r\n\r\n    if (!templateId) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Template ID is required'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Check if template exists and belongs to user\r\n    const existingTemplate = await env.DB.prepare(`\r\n      SELECT id FROM form_templates \r\n      WHERE id = ? AND user_id = ?\r\n    `).bind(templateId, user.id).first();\r\n\r\n    if (!existingTemplate) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Form template not found'\r\n      }), {\r\n        status: 404,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Parse request body\r\n    const body = await request.json();\r\n    const { name, description, form_schema } = body;\r\n\r\n    // Validate required fields\r\n    if (!name || !form_schema) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Name and form schema are required'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Validate form_schema is valid JSON\r\n    if (typeof form_schema !== 'object') {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Form schema must be a valid JSON object'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Update form template\r\n    const now = new Date().toISOString();\r\n\r\n    await env.DB.prepare(`\r\n      UPDATE form_templates \r\n      SET name = ?, description = ?, form_schema = ?, updated_at = ?\r\n      WHERE id = ? AND user_id = ?\r\n    `).bind(\r\n      name,\r\n      description || null,\r\n      JSON.stringify(form_schema),\r\n      now,\r\n      templateId,\r\n      user.id\r\n    ).run();\r\n\r\n    // Return updated template\r\n    const template = await env.DB.prepare(`\r\n      SELECT id, name, description, form_schema, created_at, updated_at \r\n      FROM form_templates \r\n      WHERE id = ?\r\n    `).bind(templateId).first();\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      data: {\r\n        ...template,\r\n        form_schema: JSON.parse(template.form_schema)\r\n      }\r\n    }), {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error updating form template:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to update form template'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport async function onRequestDelete(context) {\r\n  const { request, env } = context;\r\n  \r\n  // Add CORS headers\r\n  const corsHeaders = addCorsHeaders();\r\n  \r\n  try {\r\n    // Authenticate user\r\n    const user = await requireAuth(request, env);\r\n    if (user instanceof Response) return user;\r\n\r\n    // Get template ID from URL\r\n    const url = new URL(request.url);\r\n    const templateId = url.searchParams.get('id');\r\n\r\n    if (!templateId) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Template ID is required'\r\n      }), {\r\n        status: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Check if template exists and belongs to user\r\n    const existingTemplate = await env.DB.prepare(`\r\n      SELECT id FROM form_templates \r\n      WHERE id = ? AND user_id = ?\r\n    `).bind(templateId, user.id).first();\r\n\r\n    if (!existingTemplate) {\r\n      return new Response(JSON.stringify({\r\n        success: false,\r\n        message: 'Form template not found'\r\n      }), {\r\n        status: 404,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...corsHeaders\r\n        }\r\n      });\r\n    }\r\n\r\n    // Delete the template (this will cascade delete submissions due to foreign key)\r\n    await env.DB.prepare(`\r\n      DELETE FROM form_templates \r\n      WHERE id = ? AND user_id = ?\r\n    `).bind(templateId, user.id).run();\r\n\r\n    return new Response(JSON.stringify({\r\n      success: true,\r\n      message: 'Form template deleted successfully'\r\n    }), {\r\n      status: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Error deleting form template:', error);\r\n    return new Response(JSON.stringify({\r\n      success: false,\r\n      message: 'Failed to delete form template'\r\n    }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...corsHeaders\r\n      }\r\n    });\r\n  }\r\n}", "/**\r\n * Form Analytics API Endpoint\r\n * Provides comprehensive analytics and reporting for form submissions\r\n * \r\n * Features:\r\n * - Submission statistics and trends\r\n * - Field completion analysis\r\n * - Response data insights\r\n * - Export capabilities (CSV, JSON)\r\n * - Date range filtering\r\n * - Template-specific analytics\r\n */\r\n\r\nimport { requireAuth, addCorsHeaders, handleCors } from '../../auth/middleware.js';\r\n\r\nexport async function onRequest(context) {\r\n    const { request, env } = context;\r\n    \r\n    // Handle CORS preflight\r\n    if (request.method === 'OPTIONS') {\r\n        return handleCors();\r\n    }\r\n\r\n    try {\r\n        const method = request.method;\r\n        const url = new URL(request.url);\r\n        \r\n        switch (method) {\r\n            case 'GET':\r\n                return await getAnalytics(request, env, url);\r\n            default:\r\n                return addCorsHeaders(new Response(JSON.stringify({\r\n                    success: false,\r\n                    message: 'Method not allowed'\r\n                }), {\r\n                    status: 405,\r\n                    headers: { 'Content-Type': 'application/json' }\r\n                }));\r\n        }\r\n        \r\n    } catch (error) {\r\n        console.error('Analytics API error:', error);\r\n        return addCorsHeaders(new Response(JSON.stringify({\r\n            success: false,\r\n            message: 'Internal server error'\r\n        }), {\r\n            status: 500,\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }));\r\n    }\r\n}\r\n\r\n/**\r\n * Get form analytics and statistics\r\n */\r\nasync function getAnalytics(request, env, url) {\r\n    // Authenticate user\r\n    const authResult = await requireAuth(request, env);\r\n    if (!authResult.success) {\r\n        return addCorsHeaders(new Response(JSON.stringify(authResult), {\r\n            status: 401,\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }));\r\n    }\r\n    \r\n    const userId = authResult.data.userId;\r\n    const params = url.searchParams;\r\n    \r\n    // Parse query parameters\r\n    const templateId = params.get('template_id');\r\n    const startDate = params.get('start_date');\r\n    const endDate = params.get('end_date');\r\n    const format = params.get('format') || 'json'; // json or csv\r\n    const type = params.get('type') || 'overview'; // overview, trends, fields, export\r\n    \r\n    try {\r\n        let analyticsData;\r\n        \r\n        switch (type) {\r\n            case 'overview':\r\n                analyticsData = await getOverviewAnalytics(env, userId, templateId, startDate, endDate);\r\n                break;\r\n            case 'trends':\r\n                analyticsData = await getTrendsAnalytics(env, userId, templateId, startDate, endDate);\r\n                break;\r\n            case 'fields':\r\n                analyticsData = await getFieldAnalytics(env, userId, templateId, startDate, endDate);\r\n                break;\r\n            case 'export':\r\n                return await exportData(env, userId, templateId, startDate, endDate, format);\r\n            default:\r\n                analyticsData = await getOverviewAnalytics(env, userId, templateId, startDate, endDate);\r\n        }\r\n        \r\n        return addCorsHeaders(new Response(JSON.stringify({\r\n            success: true,\r\n            data: analyticsData\r\n        }), {\r\n            status: 200,\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }));\r\n        \r\n    } catch (error) {\r\n        console.error('Analytics query error:', error);\r\n        return addCorsHeaders(new Response(JSON.stringify({\r\n            success: false,\r\n            message: 'Failed to retrieve analytics data'\r\n        }), {\r\n            status: 500,\r\n            headers: { 'Content-Type': 'application/json' }\r\n        }));\r\n    }\r\n}\r\n\r\n/**\r\n * Get overview analytics including total submissions, form counts, etc.\r\n */\r\nasync function getOverviewAnalytics(env, userId, templateId, startDate, endDate) {\r\n    const dateFilter = buildDateFilter(startDate, endDate);\r\n    const templateFilter = templateId ? `AND ft.id = ?` : '';\r\n    \r\n    // Get basic statistics\r\n    const statsQuery = `\r\n        SELECT \r\n            COUNT(DISTINCT ft.id) as total_forms,\r\n            COUNT(fs.id) as total_submissions,\r\n            AVG(CASE WHEN fs.submitted_at IS NOT NULL THEN 1 ELSE 0 END) as avg_completion_rate,\r\n            MIN(fs.submitted_at) as first_submission,\r\n            MAX(fs.submitted_at) as latest_submission\r\n        FROM form_templates ft\r\n        LEFT JOIN form_submissions fs ON ft.id = fs.template_id ${dateFilter}\r\n        WHERE ft.created_by = ? ${templateFilter}\r\n    `;\r\n    \r\n    const statsParams = [userId];\r\n    if (templateId) statsParams.push(templateId);\r\n    \r\n    const statsResult = await env.DB.prepare(statsQuery).bind(...statsParams).first();\r\n    \r\n    // Get form-specific statistics\r\n    const formsQuery = `\r\n        SELECT \r\n            ft.id,\r\n            ft.name,\r\n            ft.description,\r\n            ft.created_at,\r\n            COUNT(fs.id) as submission_count,\r\n            MAX(fs.submitted_at) as last_submission\r\n        FROM form_templates ft\r\n        LEFT JOIN form_submissions fs ON ft.id = fs.template_id ${dateFilter}\r\n        WHERE ft.created_by = ? ${templateFilter}\r\n        GROUP BY ft.id, ft.name, ft.description, ft.created_at\r\n        ORDER BY submission_count DESC\r\n        LIMIT 10\r\n    `;\r\n    \r\n    const formsParams = [userId];\r\n    if (templateId) formsParams.push(templateId);\r\n    \r\n    const formsResults = await env.DB.prepare(formsQuery).bind(...formsParams).all();\r\n    \r\n    // Get recent submissions\r\n    const recentQuery = `\r\n        SELECT \r\n            fs.id,\r\n            fs.submitted_at,\r\n            ft.name as form_name,\r\n            ft.id as template_id\r\n        FROM form_submissions fs\r\n        JOIN form_templates ft ON fs.template_id = ft.id\r\n        WHERE ft.created_by = ? ${templateFilter} ${dateFilter}\r\n        ORDER BY fs.submitted_at DESC\r\n        LIMIT 10\r\n    `;\r\n    \r\n    const recentParams = [userId];\r\n    if (templateId) recentParams.push(templateId);\r\n    \r\n    const recentResults = await env.DB.prepare(recentQuery).bind(...recentParams).all();\r\n    \r\n    return {\r\n        overview: {\r\n            total_forms: statsResult.total_forms || 0,\r\n            total_submissions: statsResult.total_submissions || 0,\r\n            avg_completion_rate: Math.round((statsResult.avg_completion_rate || 0) * 100),\r\n            first_submission: statsResult.first_submission,\r\n            latest_submission: statsResult.latest_submission\r\n        },\r\n        top_forms: formsResults.results || [],\r\n        recent_submissions: recentResults.results || []\r\n    };\r\n}\r\n\r\n/**\r\n * Get trends analytics showing submission patterns over time\r\n */\r\nasync function getTrendsAnalytics(env, userId, templateId, startDate, endDate) {\r\n    const dateFilter = buildDateFilter(startDate, endDate);\r\n    const templateFilter = templateId ? `AND ft.id = ?` : '';\r\n    \r\n    // Daily submission trends\r\n    const dailyQuery = `\r\n        SELECT \r\n            DATE(fs.submitted_at) as date,\r\n            COUNT(fs.id) as submissions\r\n        FROM form_submissions fs\r\n        JOIN form_templates ft ON fs.template_id = ft.id\r\n        WHERE ft.created_by = ? ${templateFilter} ${dateFilter}\r\n        GROUP BY DATE(fs.submitted_at)\r\n        ORDER BY date DESC\r\n        LIMIT 30\r\n    `;\r\n    \r\n    const dailyParams = [userId];\r\n    if (templateId) dailyParams.push(templateId);\r\n    \r\n    const dailyResults = await env.DB.prepare(dailyQuery).bind(...dailyParams).all();\r\n    \r\n    // Hourly submission patterns\r\n    const hourlyQuery = `\r\n        SELECT \r\n            CAST(strftime('%H', fs.submitted_at) AS INTEGER) as hour,\r\n            COUNT(fs.id) as submissions\r\n        FROM form_submissions fs\r\n        JOIN form_templates ft ON fs.template_id = ft.id\r\n        WHERE ft.created_by = ? ${templateFilter} ${dateFilter}\r\n        GROUP BY hour\r\n        ORDER BY hour\r\n    `;\r\n    \r\n    const hourlyParams = [userId];\r\n    if (templateId) hourlyParams.push(templateId);\r\n    \r\n    const hourlyResults = await env.DB.prepare(hourlyQuery).bind(...hourlyParams).all();\r\n    \r\n    // Weekly submission patterns\r\n    const weeklyQuery = `\r\n        SELECT \r\n            CAST(strftime('%w', fs.submitted_at) AS INTEGER) as day_of_week,\r\n            COUNT(fs.id) as submissions\r\n        FROM form_submissions fs\r\n        JOIN form_templates ft ON fs.template_id = ft.id\r\n        WHERE ft.created_by = ? ${templateFilter} ${dateFilter}\r\n        GROUP BY day_of_week\r\n        ORDER BY day_of_week\r\n    `;\r\n    \r\n    const weeklyParams = [userId];\r\n    if (templateId) weeklyParams.push(templateId);\r\n    \r\n    const weeklyResults = await env.DB.prepare(weeklyQuery).bind(...weeklyParams).all();\r\n    \r\n    // Map day numbers to names\r\n    const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n    const weeklyData = weeklyResults.results?.map(row => ({\r\n        day: dayNames[row.day_of_week],\r\n        day_number: row.day_of_week,\r\n        submissions: row.submissions\r\n    })) || [];\r\n    \r\n    return {\r\n        daily_trends: dailyResults.results || [],\r\n        hourly_patterns: hourlyResults.results || [],\r\n        weekly_patterns: weeklyData\r\n    };\r\n}\r\n\r\n/**\r\n * Get field-level analytics for form completion rates\r\n */\r\nasync function getFieldAnalytics(env, userId, templateId, startDate, endDate) {\r\n    if (!templateId) {\r\n        throw new Error('Template ID is required for field analytics');\r\n    }\r\n    \r\n    const dateFilter = buildDateFilter(startDate, endDate);\r\n    \r\n    // Get template schema\r\n    const templateQuery = `\r\n        SELECT form_schema FROM form_templates \r\n        WHERE id = ? AND created_by = ?\r\n    `;\r\n    \r\n    const template = await env.DB.prepare(templateQuery).bind(templateId, userId).first();\r\n    \r\n    if (!template) {\r\n        throw new Error('Template not found');\r\n    }\r\n    \r\n    let formSchema;\r\n    try {\r\n        formSchema = JSON.parse(template.form_schema);\r\n    } catch (error) {\r\n        throw new Error('Invalid form schema');\r\n    }\r\n    \r\n    // Get all submissions for this template\r\n    const submissionsQuery = `\r\n        SELECT submission_data FROM form_submissions fs\r\n        JOIN form_templates ft ON fs.template_id = ft.id\r\n        WHERE ft.id = ? AND ft.created_by = ? ${dateFilter}\r\n    `;\r\n    \r\n    const submissions = await env.DB.prepare(submissionsQuery).bind(templateId, userId).all();\r\n    \r\n    // Analyze field completion rates\r\n    const fields = formSchema.fields || [];\r\n    const totalSubmissions = submissions.results?.length || 0;\r\n    \r\n    const fieldAnalytics = fields.map(field => {\r\n        let completedCount = 0;\r\n        let values = [];\r\n        \r\n        submissions.results?.forEach(submission => {\r\n            try {\r\n                const data = JSON.parse(submission.submission_data);\r\n                const fieldValue = data[field.name];\r\n                \r\n                if (fieldValue !== undefined && fieldValue !== null && fieldValue !== '') {\r\n                    completedCount++;\r\n                    values.push(fieldValue);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error parsing submission data:', error);\r\n            }\r\n        });\r\n        \r\n        const completionRate = totalSubmissions > 0 ? (completedCount / totalSubmissions) * 100 : 0;\r\n        \r\n        // Generate field-specific insights\r\n        let insights = {};\r\n        if (field.type === 'select' || field.type === 'radio') {\r\n            insights = generateChoiceFieldInsights(values, field);\r\n        } else if (field.type === 'number') {\r\n            insights = generateNumericFieldInsights(values);\r\n        } else if (field.type === 'text' || field.type === 'textarea') {\r\n            insights = generateTextFieldInsights(values);\r\n        }\r\n        \r\n        return {\r\n            field_name: field.name,\r\n            field_type: field.type,\r\n            field_label: field.label || field.name,\r\n            completion_rate: Math.round(completionRate),\r\n            completed_count: completedCount,\r\n            total_submissions: totalSubmissions,\r\n            insights: insights\r\n        };\r\n    });\r\n    \r\n    return {\r\n        template_id: templateId,\r\n        total_submissions: totalSubmissions,\r\n        field_analytics: fieldAnalytics\r\n    };\r\n}\r\n\r\n/**\r\n * Export data in various formats\r\n */\r\nasync function exportData(env, userId, templateId, startDate, endDate, format) {\r\n    const dateFilter = buildDateFilter(startDate, endDate);\r\n    const templateFilter = templateId ? `AND ft.id = ?` : '';\r\n    \r\n    const query = `\r\n        SELECT \r\n            fs.id,\r\n            fs.submitted_at,\r\n            ft.name as form_name,\r\n            ft.id as template_id,\r\n            fs.submission_data\r\n        FROM form_submissions fs\r\n        JOIN form_templates ft ON fs.template_id = ft.id\r\n        WHERE ft.created_by = ? ${templateFilter} ${dateFilter}\r\n        ORDER BY fs.submitted_at DESC\r\n    `;\r\n    \r\n    const params = [userId];\r\n    if (templateId) params.push(templateId);\r\n    \r\n    const results = await env.DB.prepare(query).bind(...params).all();\r\n    const submissions = results.results || [];\r\n    \r\n    if (format === 'csv') {\r\n        const csv = generateCSV(submissions);\r\n        return addCorsHeaders(new Response(csv, {\r\n            status: 200,\r\n            headers: {\r\n                'Content-Type': 'text/csv',\r\n                'Content-Disposition': `attachment; filename=\"form-submissions-${Date.now()}.csv\"`\r\n            }\r\n        }));\r\n    } else {\r\n        // JSON export\r\n        const exportData = {\r\n            exported_at: new Date().toISOString(),\r\n            total_records: submissions.length,\r\n            filters: {\r\n                template_id: templateId,\r\n                start_date: startDate,\r\n                end_date: endDate\r\n            },\r\n            submissions: submissions.map(sub => ({\r\n                ...sub,\r\n                submission_data: JSON.parse(sub.submission_data)\r\n            }))\r\n        };\r\n        \r\n        return addCorsHeaders(new Response(JSON.stringify(exportData, null, 2), {\r\n            status: 200,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Content-Disposition': `attachment; filename=\"form-submissions-${Date.now()}.json\"`\r\n            }\r\n        }));\r\n    }\r\n}\r\n\r\n/**\r\n * Helper function to build date filter SQL\r\n */\r\nfunction buildDateFilter(startDate, endDate) {\r\n    let filter = '';\r\n    \r\n    if (startDate) {\r\n        filter += ` AND fs.submitted_at >= '${startDate}'`;\r\n    }\r\n    \r\n    if (endDate) {\r\n        filter += ` AND fs.submitted_at <= '${endDate} 23:59:59'`;\r\n    }\r\n    \r\n    return filter;\r\n}\r\n\r\n/**\r\n * Generate insights for choice fields (select, radio)\r\n */\r\nfunction generateChoiceFieldInsights(values, field) {\r\n    const choices = field.options || [];\r\n    const choiceCounts = {};\r\n    \r\n    choices.forEach(choice => {\r\n        choiceCounts[choice.value || choice] = 0;\r\n    });\r\n    \r\n    values.forEach(value => {\r\n        if (choiceCounts.hasOwnProperty(value)) {\r\n            choiceCounts[value]++;\r\n        }\r\n    });\r\n    \r\n    const mostPopular = Object.entries(choiceCounts)\r\n        .sort(([,a], [,b]) => b - a)[0];\r\n    \r\n    return {\r\n        choice_distribution: choiceCounts,\r\n        most_popular: mostPopular ? {\r\n            value: mostPopular[0],\r\n            count: mostPopular[1]\r\n        } : null,\r\n        total_responses: values.length\r\n    };\r\n}\r\n\r\n/**\r\n * Generate insights for numeric fields\r\n */\r\nfunction generateNumericFieldInsights(values) {\r\n    const numbers = values.filter(v => !isNaN(v)).map(Number);\r\n    \r\n    if (numbers.length === 0) {\r\n        return { no_numeric_data: true };\r\n    }\r\n    \r\n    const sum = numbers.reduce((a, b) => a + b, 0);\r\n    const avg = sum / numbers.length;\r\n    const sorted = numbers.sort((a, b) => a - b);\r\n    \r\n    return {\r\n        count: numbers.length,\r\n        average: Math.round(avg * 100) / 100,\r\n        minimum: sorted[0],\r\n        maximum: sorted[sorted.length - 1],\r\n        median: sorted.length % 2 === 0 \r\n            ? (sorted[sorted.length / 2 - 1] + sorted[sorted.length / 2]) / 2\r\n            : sorted[Math.floor(sorted.length / 2)]\r\n    };\r\n}\r\n\r\n/**\r\n * Generate insights for text fields\r\n */\r\nfunction generateTextFieldInsights(values) {\r\n    const lengths = values.map(v => String(v).length);\r\n    const totalLength = lengths.reduce((a, b) => a + b, 0);\r\n    \r\n    return {\r\n        response_count: values.length,\r\n        average_length: values.length > 0 ? Math.round(totalLength / values.length) : 0,\r\n        min_length: Math.min(...lengths) || 0,\r\n        max_length: Math.max(...lengths) || 0\r\n    };\r\n}\r\n\r\n/**\r\n * Generate CSV from submissions data\r\n */\r\nfunction generateCSV(submissions) {\r\n    if (submissions.length === 0) {\r\n        return 'No data available';\r\n    }\r\n    \r\n    // Parse all submission data to determine all possible columns\r\n    const allFields = new Set(['id', 'form_name', 'template_id', 'submitted_at']);\r\n    \r\n    submissions.forEach(sub => {\r\n        try {\r\n            const data = JSON.parse(sub.submission_data);\r\n            Object.keys(data).forEach(key => allFields.add(key));\r\n        } catch (error) {\r\n            console.error('Error parsing submission data for CSV:', error);\r\n        }\r\n    });\r\n    \r\n    const headers = Array.from(allFields);\r\n    const csvRows = [headers.join(',')];\r\n    \r\n    submissions.forEach(sub => {\r\n        try {\r\n            const data = JSON.parse(sub.submission_data);\r\n            const row = headers.map(header => {\r\n                let value = '';\r\n                \r\n                if (header === 'id') value = sub.id;\r\n                else if (header === 'form_name') value = sub.form_name;\r\n                else if (header === 'template_id') value = sub.template_id;\r\n                else if (header === 'submitted_at') value = sub.submitted_at;\r\n                else value = data[header] || '';\r\n                \r\n                // Escape quotes and wrap in quotes if contains comma\r\n                if (typeof value === 'string') {\r\n                    value = value.replace(/\"/g, '\"\"');\r\n                    if (value.includes(',')) {\r\n                        value = `\"${value}\"`;\r\n                    }\r\n                }\r\n                \r\n                return value;\r\n            });\r\n            \r\n            csvRows.push(row.join(','));\r\n        } catch (error) {\r\n            console.error('Error processing submission for CSV:', error);\r\n        }\r\n    });\r\n    \r\n    return csvRows.join('\\n');\r\n}", "import { onRequestOptions as __api_auth_login_js_onRequestOptions } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\login.js\"\nimport { onRequestPost as __api_auth_login_js_onRequestPost } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\login.js\"\nimport { onRequestOptions as __api_auth_logout_js_onRequestOptions } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\logout.js\"\nimport { onRequestPost as __api_auth_logout_js_onRequestPost } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\logout.js\"\nimport { onRequestGet as __api_auth_me_js_onRequestGet } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\me.js\"\nimport { onRequestOptions as __api_auth_me_js_onRequestOptions } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\me.js\"\nimport { onRequestOptions as __api_auth_register_js_onRequestOptions } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\register.js\"\nimport { onRequestPost as __api_auth_register_js_onRequestPost } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\register.js\"\nimport { onRequestGet as __api_auth_session_js_onRequestGet } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\session.js\"\nimport { onRequestOptions as __api_auth_session_js_onRequestOptions } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\auth\\\\session.js\"\nimport { onRequestGet as __api_forms_render_js_onRequestGet } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\render.js\"\nimport { onRequestOptions as __api_forms_render_js_onRequestOptions } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\render.js\"\nimport { onRequestPost as __api_forms_render_js_onRequestPost } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\render.js\"\nimport { onRequestDelete as __api_forms_submissions_js_onRequestDelete } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\submissions.js\"\nimport { onRequestGet as __api_forms_submissions_js_onRequestGet } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\submissions.js\"\nimport { onRequestOptions as __api_forms_submissions_js_onRequestOptions } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\submissions.js\"\nimport { onRequestPost as __api_forms_submissions_js_onRequestPost } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\submissions.js\"\nimport { onRequestDelete as __api_forms_templates_js_onRequestDelete } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\templates.js\"\nimport { onRequestGet as __api_forms_templates_js_onRequestGet } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\templates.js\"\nimport { onRequestOptions as __api_forms_templates_js_onRequestOptions } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\templates.js\"\nimport { onRequestPost as __api_forms_templates_js_onRequestPost } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\templates.js\"\nimport { onRequestPut as __api_forms_templates_js_onRequestPut } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\templates.js\"\nimport { onRequest as __api_forms_analytics_js_onRequest } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\functions\\\\api\\\\forms\\\\analytics.js\"\n\nexport const routes = [\n    {\n      routePath: \"/api/auth/login\",\n      mountPath: \"/api/auth\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_auth_login_js_onRequestOptions],\n    },\n  {\n      routePath: \"/api/auth/login\",\n      mountPath: \"/api/auth\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_auth_login_js_onRequestPost],\n    },\n  {\n      routePath: \"/api/auth/logout\",\n      mountPath: \"/api/auth\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_auth_logout_js_onRequestOptions],\n    },\n  {\n      routePath: \"/api/auth/logout\",\n      mountPath: \"/api/auth\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_auth_logout_js_onRequestPost],\n    },\n  {\n      routePath: \"/api/auth/me\",\n      mountPath: \"/api/auth\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_auth_me_js_onRequestGet],\n    },\n  {\n      routePath: \"/api/auth/me\",\n      mountPath: \"/api/auth\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_auth_me_js_onRequestOptions],\n    },\n  {\n      routePath: \"/api/auth/register\",\n      mountPath: \"/api/auth\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_auth_register_js_onRequestOptions],\n    },\n  {\n      routePath: \"/api/auth/register\",\n      mountPath: \"/api/auth\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_auth_register_js_onRequestPost],\n    },\n  {\n      routePath: \"/api/auth/session\",\n      mountPath: \"/api/auth\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_auth_session_js_onRequestGet],\n    },\n  {\n      routePath: \"/api/auth/session\",\n      mountPath: \"/api/auth\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_auth_session_js_onRequestOptions],\n    },\n  {\n      routePath: \"/api/forms/render\",\n      mountPath: \"/api/forms\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_forms_render_js_onRequestGet],\n    },\n  {\n      routePath: \"/api/forms/render\",\n      mountPath: \"/api/forms\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_forms_render_js_onRequestOptions],\n    },\n  {\n      routePath: \"/api/forms/render\",\n      mountPath: \"/api/forms\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_forms_render_js_onRequestPost],\n    },\n  {\n      routePath: \"/api/forms/submissions\",\n      mountPath: \"/api/forms\",\n      method: \"DELETE\",\n      middlewares: [],\n      modules: [__api_forms_submissions_js_onRequestDelete],\n    },\n  {\n      routePath: \"/api/forms/submissions\",\n      mountPath: \"/api/forms\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_forms_submissions_js_onRequestGet],\n    },\n  {\n      routePath: \"/api/forms/submissions\",\n      mountPath: \"/api/forms\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_forms_submissions_js_onRequestOptions],\n    },\n  {\n      routePath: \"/api/forms/submissions\",\n      mountPath: \"/api/forms\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_forms_submissions_js_onRequestPost],\n    },\n  {\n      routePath: \"/api/forms/templates\",\n      mountPath: \"/api/forms\",\n      method: \"DELETE\",\n      middlewares: [],\n      modules: [__api_forms_templates_js_onRequestDelete],\n    },\n  {\n      routePath: \"/api/forms/templates\",\n      mountPath: \"/api/forms\",\n      method: \"GET\",\n      middlewares: [],\n      modules: [__api_forms_templates_js_onRequestGet],\n    },\n  {\n      routePath: \"/api/forms/templates\",\n      mountPath: \"/api/forms\",\n      method: \"OPTIONS\",\n      middlewares: [],\n      modules: [__api_forms_templates_js_onRequestOptions],\n    },\n  {\n      routePath: \"/api/forms/templates\",\n      mountPath: \"/api/forms\",\n      method: \"POST\",\n      middlewares: [],\n      modules: [__api_forms_templates_js_onRequestPost],\n    },\n  {\n      routePath: \"/api/forms/templates\",\n      mountPath: \"/api/forms\",\n      method: \"PUT\",\n      middlewares: [],\n      modules: [__api_forms_templates_js_onRequestPut],\n    },\n  {\n      routePath: \"/api/forms/analytics\",\n      mountPath: \"/api/forms\",\n      method: \"\",\n      middlewares: [],\n      modules: [__api_forms_analytics_js_onRequest],\n    },\n  ]", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\.wrangler\\\\tmp\\\\bundle-sJGPWf\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\Peter Darley\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\.wrangler\\\\tmp\\\\bundle-sJGPWf\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\.wrangler\\\\tmp\\\\bundle-sJGPWf\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\Peter Darley\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\pages-template-worker.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\Peter Darley\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\Peter Darley\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\Peter Darley\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\pages-template-worker.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "import { match } from \"path-to-regexp\";\n\n//note: this explicitly does not include the * character, as pages requires this\nconst escapeRegex = /[.+?^${}()|[\\]\\\\]/g;\n\ntype HTTPMethod =\n\t| \"HEAD\"\n\t| \"OPTIONS\"\n\t| \"GET\"\n\t| \"POST\"\n\t| \"PUT\"\n\t| \"PATCH\"\n\t| \"DELETE\";\n\n/* TODO: Grab these from @cloudflare/workers-types instead */\ntype Params<P extends string = string> = Record<P, string | string[]>;\n\ntype EventContext<Env, P extends string, Data> = {\n\trequest: Request;\n\tfunctionPath: string;\n\twaitUntil: (promise: Promise<unknown>) => void;\n\tpassThroughOnException: () => void;\n\tnext: (input?: Request | string, init?: RequestInit) => Promise<Response>;\n\tenv: Env & { ASSETS: { fetch: typeof fetch } };\n\tparams: Params<P>;\n\tdata: Data;\n};\n\ndeclare type PagesFunction<\n\tEnv = unknown,\n\tP extends string = string,\n\tData extends Record<string, unknown> = Record<string, unknown>,\n> = (context: EventContext<Env, P, Data>) => Response | Promise<Response>;\n/* end @cloudflare/workers-types */\n\ntype RouteHandler = {\n\troutePath: string;\n\tmountPath: string;\n\tmethod?: HTTPMethod;\n\tmodules: PagesFunction[];\n\tmiddlewares: PagesFunction[];\n};\n\n// inject `routes` via ESBuild\ndeclare const routes: RouteHandler[];\n// define `__FALLBACK_SERVICE__` via ESBuild\ndeclare const __FALLBACK_SERVICE__: string;\n\n// expect an ASSETS fetcher binding pointing to the asset-server stage\ntype FetchEnv = {\n\t[name: string]: { fetch: typeof fetch };\n\tASSETS: { fetch: typeof fetch };\n};\n\ntype WorkerContext = {\n\twaitUntil: (promise: Promise<unknown>) => void;\n\tpassThroughOnException: () => void;\n};\n\nfunction* executeRequest(request: Request) {\n\tconst requestPath = new URL(request.url).pathname;\n\n\t// First, iterate through the routes (backwards) and execute \"middlewares\" on partial route matches\n\tfor (const route of [...routes].reverse()) {\n\t\tif (route.method && route.method !== request.method) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// replaces with \"\\\\$&\", this prepends a backslash to the matched string, e.g. \"[\" becomes \"\\[\"\n\t\tconst routeMatcher = match(route.routePath.replace(escapeRegex, \"\\\\$&\"), {\n\t\t\tend: false,\n\t\t});\n\t\tconst mountMatcher = match(route.mountPath.replace(escapeRegex, \"\\\\$&\"), {\n\t\t\tend: false,\n\t\t});\n\t\tconst matchResult = routeMatcher(requestPath);\n\t\tconst mountMatchResult = mountMatcher(requestPath);\n\t\tif (matchResult && mountMatchResult) {\n\t\t\tfor (const handler of route.middlewares.flat()) {\n\t\t\t\tyield {\n\t\t\t\t\thandler,\n\t\t\t\t\tparams: matchResult.params as Params,\n\t\t\t\t\tpath: mountMatchResult.path,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\t// Then look for the first exact route match and execute its \"modules\"\n\tfor (const route of routes) {\n\t\tif (route.method && route.method !== request.method) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst routeMatcher = match(route.routePath.replace(escapeRegex, \"\\\\$&\"), {\n\t\t\tend: true,\n\t\t});\n\t\tconst mountMatcher = match(route.mountPath.replace(escapeRegex, \"\\\\$&\"), {\n\t\t\tend: false,\n\t\t});\n\t\tconst matchResult = routeMatcher(requestPath);\n\t\tconst mountMatchResult = mountMatcher(requestPath);\n\t\tif (matchResult && mountMatchResult && route.modules.length) {\n\t\t\tfor (const handler of route.modules.flat()) {\n\t\t\t\tyield {\n\t\t\t\t\thandler,\n\t\t\t\t\tparams: matchResult.params as Params,\n\t\t\t\t\tpath: matchResult.path,\n\t\t\t\t};\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport default {\n\tasync fetch(\n\t\toriginalRequest: Request,\n\t\tenv: FetchEnv,\n\t\tworkerContext: WorkerContext\n\t) {\n\t\tlet request = originalRequest;\n\t\tconst handlerIterator = executeRequest(request);\n\t\tlet data = {}; // arbitrary data the user can set between functions\n\t\tlet isFailOpen = false;\n\n\t\tconst next = async (input?: RequestInfo, init?: RequestInit) => {\n\t\t\tif (input !== undefined) {\n\t\t\t\tlet url = input;\n\t\t\t\tif (typeof input === \"string\") {\n\t\t\t\t\turl = new URL(input, request.url).toString();\n\t\t\t\t}\n\t\t\t\trequest = new Request(url, init);\n\t\t\t}\n\n\t\t\tconst result = handlerIterator.next();\n\t\t\t// Note we can't use `!result.done` because this doesn't narrow to the correct type\n\t\t\tif (result.done === false) {\n\t\t\t\tconst { handler, params, path } = result.value;\n\t\t\t\tconst context = {\n\t\t\t\t\trequest: new Request(request.clone()),\n\t\t\t\t\tfunctionPath: path,\n\t\t\t\t\tnext,\n\t\t\t\t\tparams,\n\t\t\t\t\tget data() {\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t},\n\t\t\t\t\tset data(value) {\n\t\t\t\t\t\tif (typeof value !== \"object\" || value === null) {\n\t\t\t\t\t\t\tthrow new Error(\"context.data must be an object\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// user has overriden context.data, so we need to merge it with the existing data\n\t\t\t\t\t\tdata = value;\n\t\t\t\t\t},\n\t\t\t\t\tenv,\n\t\t\t\t\twaitUntil: workerContext.waitUntil.bind(workerContext),\n\t\t\t\t\tpassThroughOnException: () => {\n\t\t\t\t\t\tisFailOpen = true;\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tconst response = await handler(context);\n\n\t\t\t\tif (!(response instanceof Response)) {\n\t\t\t\t\tthrow new Error(\"Your Pages function should return a Response\");\n\t\t\t\t}\n\n\t\t\t\treturn cloneResponse(response);\n\t\t\t} else if (__FALLBACK_SERVICE__) {\n\t\t\t\t// There are no more handlers so finish with the fallback service (`env.ASSETS.fetch` in Pages' case)\n\t\t\t\tconst response = await env[__FALLBACK_SERVICE__].fetch(request);\n\t\t\t\treturn cloneResponse(response);\n\t\t\t} else {\n\t\t\t\t// There was not fallback service so actually make the request to the origin.\n\t\t\t\tconst response = await fetch(request);\n\t\t\t\treturn cloneResponse(response);\n\t\t\t}\n\t\t};\n\n\t\ttry {\n\t\t\treturn await next();\n\t\t} catch (error) {\n\t\t\tif (isFailOpen) {\n\t\t\t\tconst response = await env[__FALLBACK_SERVICE__].fetch(request);\n\t\t\t\treturn cloneResponse(response);\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\t},\n};\n\n// This makes a Response mutable\nconst cloneResponse = (response: Response) =>\n\t// https://fetch.spec.whatwg.org/#null-body-status\n\tnew Response(\n\t\t[101, 204, 205, 304].includes(response.status) ? null : response.body,\n\t\tresponse\n\t);\n", "/**\n * Tokenizer results.\n */\ninterface LexToken {\n  type:\n    | \"OPEN\"\n    | \"CLOSE\"\n    | \"PATTERN\"\n    | \"NAME\"\n    | \"CHAR\"\n    | \"ESCAPED_CHAR\"\n    | \"MODIFIER\"\n    | \"END\";\n  index: number;\n  value: string;\n}\n\n/**\n * Tokenize input string.\n */\nfunction lexer(str: string): LexToken[] {\n  const tokens: LexToken[] = [];\n  let i = 0;\n\n  while (i < str.length) {\n    const char = str[i];\n\n    if (char === \"*\" || char === \"+\" || char === \"?\") {\n      tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"\\\\\") {\n      tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"{\") {\n      tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"}\") {\n      tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \":\") {\n      let name = \"\";\n      let j = i + 1;\n\n      while (j < str.length) {\n        const code = str.charCodeAt(j);\n\n        if (\n          // `0-9`\n          (code >= 48 && code <= 57) ||\n          // `A-Z`\n          (code >= 65 && code <= 90) ||\n          // `a-z`\n          (code >= 97 && code <= 122) ||\n          // `_`\n          code === 95\n        ) {\n          name += str[j++];\n          continue;\n        }\n\n        break;\n      }\n\n      if (!name) throw new TypeError(`Missing parameter name at ${i}`);\n\n      tokens.push({ type: \"NAME\", index: i, value: name });\n      i = j;\n      continue;\n    }\n\n    if (char === \"(\") {\n      let count = 1;\n      let pattern = \"\";\n      let j = i + 1;\n\n      if (str[j] === \"?\") {\n        throw new TypeError(`Pattern cannot start with \"?\" at ${j}`);\n      }\n\n      while (j < str.length) {\n        if (str[j] === \"\\\\\") {\n          pattern += str[j++] + str[j++];\n          continue;\n        }\n\n        if (str[j] === \")\") {\n          count--;\n          if (count === 0) {\n            j++;\n            break;\n          }\n        } else if (str[j] === \"(\") {\n          count++;\n          if (str[j + 1] !== \"?\") {\n            throw new TypeError(`Capturing groups are not allowed at ${j}`);\n          }\n        }\n\n        pattern += str[j++];\n      }\n\n      if (count) throw new TypeError(`Unbalanced pattern at ${i}`);\n      if (!pattern) throw new TypeError(`Missing pattern at ${i}`);\n\n      tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n      i = j;\n      continue;\n    }\n\n    tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n  }\n\n  tokens.push({ type: \"END\", index: i, value: \"\" });\n\n  return tokens;\n}\n\nexport interface ParseOptions {\n  /**\n   * Set the default delimiter for repeat parameters. (default: `'/'`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters to automatically consider prefixes when parsing.\n   */\n  prefixes?: string;\n}\n\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str: string, options: ParseOptions = {}): Token[] {\n  const tokens = lexer(str);\n  const { prefixes = \"./\", delimiter = \"/#?\" } = options;\n  const result: Token[] = [];\n  let key = 0;\n  let i = 0;\n  let path = \"\";\n\n  const tryConsume = (type: LexToken[\"type\"]): string | undefined => {\n    if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n  };\n\n  const mustConsume = (type: LexToken[\"type\"]): string => {\n    const value = tryConsume(type);\n    if (value !== undefined) return value;\n    const { type: nextType, index } = tokens[i];\n    throw new TypeError(`Unexpected ${nextType} at ${index}, expected ${type}`);\n  };\n\n  const consumeText = (): string => {\n    let result = \"\";\n    let value: string | undefined;\n    while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n      result += value;\n    }\n    return result;\n  };\n\n  const isSafe = (value: string): boolean => {\n    for (const char of delimiter) if (value.indexOf(char) > -1) return true;\n    return false;\n  };\n\n  const safePattern = (prefix: string) => {\n    const prev = result[result.length - 1];\n    const prevText = prefix || (prev && typeof prev === \"string\" ? prev : \"\");\n\n    if (prev && !prevText) {\n      throw new TypeError(\n        `Must have text between two parameters, missing text after \"${(prev as Key).name}\"`,\n      );\n    }\n\n    if (!prevText || isSafe(prevText)) return `[^${escapeString(delimiter)}]+?`;\n    return `(?:(?!${escapeString(prevText)})[^${escapeString(delimiter)}])+?`;\n  };\n\n  while (i < tokens.length) {\n    const char = tryConsume(\"CHAR\");\n    const name = tryConsume(\"NAME\");\n    const pattern = tryConsume(\"PATTERN\");\n\n    if (name || pattern) {\n      let prefix = char || \"\";\n\n      if (prefixes.indexOf(prefix) === -1) {\n        path += prefix;\n        prefix = \"\";\n      }\n\n      if (path) {\n        result.push(path);\n        path = \"\";\n      }\n\n      result.push({\n        name: name || key++,\n        prefix,\n        suffix: \"\",\n        pattern: pattern || safePattern(prefix),\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    const value = char || tryConsume(\"ESCAPED_CHAR\");\n    if (value) {\n      path += value;\n      continue;\n    }\n\n    if (path) {\n      result.push(path);\n      path = \"\";\n    }\n\n    const open = tryConsume(\"OPEN\");\n    if (open) {\n      const prefix = consumeText();\n      const name = tryConsume(\"NAME\") || \"\";\n      const pattern = tryConsume(\"PATTERN\") || \"\";\n      const suffix = consumeText();\n\n      mustConsume(\"CLOSE\");\n\n      result.push({\n        name: name || (pattern ? key++ : \"\"),\n        pattern: name && !pattern ? safePattern(prefix) : pattern,\n        prefix,\n        suffix,\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    mustConsume(\"END\");\n  }\n\n  return result;\n}\n\nexport interface TokensToFunctionOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * Function for encoding input strings for output.\n   */\n  encode?: (value: string, token: Key) => string;\n  /**\n   * When `false` the function can produce an invalid (unmatched) path. (default: `true`)\n   */\n  validate?: boolean;\n}\n\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile<P extends object = object>(\n  str: string,\n  options?: ParseOptions & TokensToFunctionOptions,\n) {\n  return tokensToFunction<P>(parse(str, options), options);\n}\n\nexport type PathFunction<P extends object = object> = (data?: P) => string;\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction<P extends object = object>(\n  tokens: Token[],\n  options: TokensToFunctionOptions = {},\n): PathFunction<P> {\n  const reFlags = flags(options);\n  const { encode = (x: string) => x, validate = true } = options;\n\n  // Compile all the tokens into regexps.\n  const matches = tokens.map((token) => {\n    if (typeof token === \"object\") {\n      return new RegExp(`^(?:${token.pattern})$`, reFlags);\n    }\n  });\n\n  return (data: Record<string, any> | null | undefined) => {\n    let path = \"\";\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n\n      if (typeof token === \"string\") {\n        path += token;\n        continue;\n      }\n\n      const value = data ? data[token.name] : undefined;\n      const optional = token.modifier === \"?\" || token.modifier === \"*\";\n      const repeat = token.modifier === \"*\" || token.modifier === \"+\";\n\n      if (Array.isArray(value)) {\n        if (!repeat) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to not repeat, but got an array`,\n          );\n        }\n\n        if (value.length === 0) {\n          if (optional) continue;\n\n          throw new TypeError(`Expected \"${token.name}\" to not be empty`);\n        }\n\n        for (let j = 0; j < value.length; j++) {\n          const segment = encode(value[j], token);\n\n          if (validate && !(matches[i] as RegExp).test(segment)) {\n            throw new TypeError(\n              `Expected all \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`,\n            );\n          }\n\n          path += token.prefix + segment + token.suffix;\n        }\n\n        continue;\n      }\n\n      if (typeof value === \"string\" || typeof value === \"number\") {\n        const segment = encode(String(value), token);\n\n        if (validate && !(matches[i] as RegExp).test(segment)) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`,\n          );\n        }\n\n        path += token.prefix + segment + token.suffix;\n        continue;\n      }\n\n      if (optional) continue;\n\n      const typeOfMessage = repeat ? \"an array\" : \"a string\";\n      throw new TypeError(`Expected \"${token.name}\" to be ${typeOfMessage}`);\n    }\n\n    return path;\n  };\n}\n\nexport interface RegexpToFunctionOptions {\n  /**\n   * Function for decoding strings for params.\n   */\n  decode?: (value: string, token: Key) => string;\n}\n\n/**\n * A match result contains data about the path match.\n */\nexport interface MatchResult<P extends object = object> {\n  path: string;\n  index: number;\n  params: P;\n}\n\n/**\n * A match is either `false` (no match) or a match result.\n */\nexport type Match<P extends object = object> = false | MatchResult<P>;\n\n/**\n * The match function takes a string and returns whether it matched the path.\n */\nexport type MatchFunction<P extends object = object> = (\n  path: string,\n) => Match<P>;\n\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match<P extends object = object>(\n  str: Path,\n  options?: ParseOptions & TokensToRegexpOptions & RegexpToFunctionOptions,\n) {\n  const keys: Key[] = [];\n  const re = pathToRegexp(str, keys, options);\n  return regexpToFunction<P>(re, keys, options);\n}\n\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction<P extends object = object>(\n  re: RegExp,\n  keys: Key[],\n  options: RegexpToFunctionOptions = {},\n): MatchFunction<P> {\n  const { decode = (x: string) => x } = options;\n\n  return function (pathname: string) {\n    const m = re.exec(pathname);\n    if (!m) return false;\n\n    const { 0: path, index } = m;\n    const params = Object.create(null);\n\n    for (let i = 1; i < m.length; i++) {\n      if (m[i] === undefined) continue;\n\n      const key = keys[i - 1];\n\n      if (key.modifier === \"*\" || key.modifier === \"+\") {\n        params[key.name] = m[i].split(key.prefix + key.suffix).map((value) => {\n          return decode(value, key);\n        });\n      } else {\n        params[key.name] = decode(m[i], key);\n      }\n    }\n\n    return { path, index, params };\n  };\n}\n\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str: string) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options?: { sensitive?: boolean }) {\n  return options && options.sensitive ? \"\" : \"i\";\n}\n\n/**\n * Metadata about a key.\n */\nexport interface Key {\n  name: string | number;\n  prefix: string;\n  suffix: string;\n  pattern: string;\n  modifier: string;\n}\n\n/**\n * A token is a string (nothing special) or key metadata (capture group).\n */\nexport type Token = string | Key;\n\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path: RegExp, keys?: Key[]): RegExp {\n  if (!keys) return path;\n\n  const groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n\n  let index = 0;\n  let execResult = groupsRegex.exec(path.source);\n  while (execResult) {\n    keys.push({\n      // Use parenthesized substring match if available, index otherwise\n      name: execResult[1] || index++,\n      prefix: \"\",\n      suffix: \"\",\n      modifier: \"\",\n      pattern: \"\",\n    });\n    execResult = groupsRegex.exec(path.source);\n  }\n\n  return path;\n}\n\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(\n  paths: Array<string | RegExp>,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n): RegExp {\n  const parts = paths.map((path) => pathToRegexp(path, keys, options).source);\n  return new RegExp(`(?:${parts.join(\"|\")})`, flags(options));\n}\n\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(\n  path: string,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n) {\n  return tokensToRegexp(parse(path, options), keys, options);\n}\n\nexport interface TokensToRegexpOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * When `true` the regexp won't allow an optional trailing delimiter to match. (default: `false`)\n   */\n  strict?: boolean;\n  /**\n   * When `true` the regexp will match to the end of the string. (default: `true`)\n   */\n  end?: boolean;\n  /**\n   * When `true` the regexp will match from the beginning of the string. (default: `true`)\n   */\n  start?: boolean;\n  /**\n   * Sets the final character for non-ending optimistic matches. (default: `/`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters that can also be \"end\" characters.\n   */\n  endsWith?: string;\n  /**\n   * Encode path tokens for use in the `RegExp`.\n   */\n  encode?: (value: string) => string;\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(\n  tokens: Token[],\n  keys?: Key[],\n  options: TokensToRegexpOptions = {},\n) {\n  const {\n    strict = false,\n    start = true,\n    end = true,\n    encode = (x: string) => x,\n    delimiter = \"/#?\",\n    endsWith = \"\",\n  } = options;\n  const endsWithRe = `[${escapeString(endsWith)}]|$`;\n  const delimiterRe = `[${escapeString(delimiter)}]`;\n  let route = start ? \"^\" : \"\";\n\n  // Iterate over the tokens and create our regexp string.\n  for (const token of tokens) {\n    if (typeof token === \"string\") {\n      route += escapeString(encode(token));\n    } else {\n      const prefix = escapeString(encode(token.prefix));\n      const suffix = escapeString(encode(token.suffix));\n\n      if (token.pattern) {\n        if (keys) keys.push(token);\n\n        if (prefix || suffix) {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            const mod = token.modifier === \"*\" ? \"?\" : \"\";\n            route += `(?:${prefix}((?:${token.pattern})(?:${suffix}${prefix}(?:${token.pattern}))*)${suffix})${mod}`;\n          } else {\n            route += `(?:${prefix}(${token.pattern})${suffix})${token.modifier}`;\n          }\n        } else {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            throw new TypeError(\n              `Can not repeat \"${token.name}\" without a prefix and suffix`,\n            );\n          }\n\n          route += `(${token.pattern})${token.modifier}`;\n        }\n      } else {\n        route += `(?:${prefix}${suffix})${token.modifier}`;\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += `${delimiterRe}?`;\n\n    route += !options.endsWith ? \"$\" : `(?=${endsWithRe})`;\n  } else {\n    const endToken = tokens[tokens.length - 1];\n    const isEndDelimited =\n      typeof endToken === \"string\"\n        ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1\n        : endToken === undefined;\n\n    if (!strict) {\n      route += `(?:${delimiterRe}(?=${endsWithRe}))?`;\n    }\n\n    if (!isEndDelimited) {\n      route += `(?=${delimiterRe}|${endsWithRe})`;\n    }\n  }\n\n  return new RegExp(route, flags(options));\n}\n\n/**\n * Supported `path-to-regexp` input types.\n */\nexport type Path = string | RegExp | Array<string | RegExp>;\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(\n  path: Path,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions,\n) {\n  if (path instanceof RegExp) return regexpToRegexp(path, keys);\n  if (Array.isArray(path)) return arrayToRegexp(path, keys, options);\n  return stringToRegexp(path, keys, options);\n}\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\.wrangler\\\\tmp\\\\pages-nr7qGo\\\\functionsWorker-0.4919190103704296.mjs\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\Peter Darley\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\Peter Darley\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\.wrangler\\\\tmp\\\\pages-nr7qGo\\\\functionsWorker-0.4919190103704296.mjs\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\.wrangler\\\\tmp\\\\bundle-O26fM1\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\Peter Darley\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\.wrangler\\\\tmp\\\\bundle-O26fM1\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\Peter Darley\\\\Desktop\\\\IPLC GitHub Eval\\\\.wrangler\\\\tmp\\\\bundle-O26fM1\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;QAAY;QAAY;QAAY;QAChD;QAAY;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",
  "names": ["__require", "bcrypt", "__name", "random", "callback", "salt", "utfx", "b", "err", "isValidPassword", "onRequestPost", "onRequestOptions", "onRequestGet", "corsHeaders", "validateSubmissionData", "onRequestDelete", "exportData", "value", "_a", "result", "char", "prefix", "i", "drainBody", "middleware_ensure_req_body_drained_default", "reduceError", "jsonError", "middleware_miniflare3_json_error_default", "__INTERNAL_WRANGLER_MIDDLEWARE__", "middleware_ensure_req_body_drained_default", "middleware_miniflare3_json_error_default", "middleware_insertion_facade_default", "__facade_middleware__", "__facade_register__", "__facade_invokeChain__", "__facade_invoke__", "__facade_middleware__", "__Facade_ScheduledController__", "___Facade_ScheduledController__", "wrapExportedHandler", "__INTERNAL_WRANGLER_MIDDLEWARE__", "__facade_register__", "__facade_invoke__", "wrapWorkerEntrypoint", "WRAPPED_ENTRY", "middleware_insertion_facade_default", "middleware_loader_entry_default"]
}
